/*! p5.js v0.9.0 September 28, 2019 */

!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).p5=t()}}(function(){return function n(o,s,l){function h(e,t){if(!s[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[e]={exports:{}};o[e][0].call(a.exports,function(t){return h(o[e][1][t]||t)},a,a.exports,n,o,s,l)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,r){"use strict";var i;function _(t,e){return t.b===e.b&&t.a===e.a}function g(t,e){return t.b<e.b||t.b===e.b&&t.a<=e.a}function v(t,e,r){var i=e.b-t.b,a=r.b-e.b;return 0<i+a?i<a?e.a-t.a+i/(i+a)*(t.a-r.a):e.a-r.a+a/(i+a)*(r.a-t.a):0}function y(t,e,r){var i=e.b-t.b,a=r.b-e.b;return 0<i+a?(e.a-r.a)*i+(e.a-t.a)*a:0}function b(t,e){return t.a<e.a||t.a===e.a&&t.b<=e.b}function x(t,e,r){var i=e.a-t.a,a=r.a-e.a;return 0<i+a?i<a?e.b-t.b+i/(i+a)*(t.b-r.b):e.b-r.b+a/(i+a)*(r.b-t.b):0}function w(t,e,r){var i=e.a-t.a,a=r.a-e.a;return 0<i+a?(e.b-r.b)*i+(e.b-t.b)*a:0}function S(t,e,r,i){return(t=t<0?0:t)<=(r=r<0?0:r)?0===r?(e+i)/2:e+t/(t+r)*(i-e):i+r/(t+r)*(e-i)}function o(t){var e=n(t.b);return a(e,t.c),a(e.b,t.c),s(e,t.a),e}function C(t,e){var r=!1,i=!1;t!==e&&(e.a!==t.a&&(i=!0,m(e.a,t.a)),e.d!==t.d&&(r=!0,l(e.d,t.d)),c(e,t),i||(a(e,t.a),t.a.c=t),r||(s(e,t.d),t.d.a=t))}function d(t){var e=t.b,r=!1;t.d!==t.b.d&&(r=!0,l(t.d,t.b.d)),t.c===t?m(t.a,null):(t.b.d.a=$(t),t.a.c=t.c,c(t,$(t)),r||s(t,t.d)),e.c===e?(m(e.a,null),l(e.d,null)):(t.d.a=$(e),e.a.c=e.c,c(e,$(e))),p(t)}function M(t){var e=n(t),r=e.b;return c(e,t.e),e.a=t.b.a,a(r,e.a),e.d=r.d=t.d,e=e.b,c(t.b,$(t.b)),c(t.b,e),t.b.a=e.a,e.b.a.c=e.b,e.b.d=t.b.d,e.f=t.f,e.b.f=t.b.f,e}function f(t,e){var r=!1,i=n(t),a=i.b;return e.d!==t.d&&(r=!0,l(e.d,t.d)),c(i,t.e),c(a,e),i.a=t.b.a,a.a=e.a,i.d=a.d=t.d,t.d.a=a,r||s(i,t.d),i}function n(t){var e=new K,r=new K,i=t.b.h;return(((r.h=i).b.h=e).h=t).b.h=r,e.b=r,((e.c=e).e=r).b=e,(r.c=r).e=e}function c(t,e){var r=t.c,i=e.c;r.b.e=e,(i.b.e=t).c=i,e.c=r}function a(t,e){var r=e.f,i=new tt(e,r);for(r.e=i,r=(e.f=i).c=t;r.a=i,(r=r.c)!==t;);}function s(t,e){var r=e.d,i=new Q(e,r);for(r.b=i,(e.d=i).a=t,i.c=e.c,r=t;r.d=i,(r=r.e)!==t;);}function p(t){var e=t.h;t=t.b.h,(e.b.h=t).b.h=e}function m(t,e){for(var r=t.c,i=r;i.a=e,(i=i.c)!==r;);r=t.f,((i=t.e).f=r).e=i}function l(t,e){for(var r=t.a,i=r;i.d=e,(i=i.e)!==r;);r=t.d,((i=t.b).d=r).b=i}function P(t){var e=0;return Math.abs(t[1])>Math.abs(t[0])&&(e=1),Math.abs(t[2])>Math.abs(t[e])&&(e=2),e}var E=4e150;function L(t,e){t.f+=e.f,t.b.f+=e.b.f}function h(t,e,r){return t=t.a,e=e.a,r=r.a,e.b.a===t?r.b.a===t?g(e.a,r.a)?y(r.b.a,e.a,r.a)<=0:0<=y(e.b.a,r.a,e.a):y(r.b.a,t,r.a)<=0:r.b.a===t?0<=y(e.b.a,t,e.a):(e=v(e.b.a,t,e.a),(t=v(r.b.a,t,r.a))<=e)}function T(t){t.a.i=null;var e=t.e;e.a.c=e.c,e.c.a=e.a,t.e=null}function u(t,e){d(t.a),t.c=!1,(t.a=e).i=t}function R(t){for(var e=t.a.a;(t=ft(t)).a.a===e;);return t.c&&(u(t,e=f(dt(t).a.b,t.a.e)),t=ft(t)),t}function A(t,e,r){var i=new ut;return i.a=r,i.e=W(t.f,e.e,i),r.i=i}function D(t,e){switch(t.s){case 100130:return 0!=(1&e);case 100131:return 0!==e;case 100132:return 0<e;case 100133:return e<0;case 100134:return 2<=e||e<=-2}return!1}function I(t){var e=t.a,r=e.d;r.c=t.d,r.a=e,T(t)}function O(t,e,r){for(e=(t=e).a;t!==r;){t.c=!1;var i=dt(t),a=i.a;if(a.a!==e.a){if(!i.c){I(t);break}u(i,a=f(e.c.b,a.b))}e.c!==a&&(C($(a),a),C(e,a)),I(t),e=i.a,t=i}return e}function k(t,e,r,i,a,n){for(var o=!0;A(t,e,r.b),(r=r.c)!==i;);for(null===a&&(a=dt(e).a.b.c);(r=(i=dt(e)).a.b).a===a.a;)r.c!==a&&(C($(r),r),C($(a),r)),i.f=e.f-r.f,i.d=D(t,i.f),e.b=!0,!o&&N(t,e)&&(L(r,a),T(e),d(a)),o=!1,e=i,a=r;e.b=!0,n&&B(t,e)}function F(t,e,r,i,a){var n=[e.g[0],e.g[1],e.g[2]];e.d=null,e.d=t.o&&t.o(n,r,i,t.c)||null,null===e.d&&(a?t.n||(Z(t,100156),t.n=!0):e.d=r[0])}function G(t,e,r){var i=[null,null,null,null];i[0]=e.a.d,i[1]=r.a.d,F(t,e.a,i,[.5,.5,0,0],!1),C(e,r)}function j(t,e,r,i,a){var n=Math.abs(e.b-t.b)+Math.abs(e.a-t.a),o=Math.abs(r.b-t.b)+Math.abs(r.a-t.a),s=a+1;i[a]=.5*o/(n+o),i[s]=.5*n/(n+o),t.g[0]+=i[a]*e.g[0]+i[s]*r.g[0],t.g[1]+=i[a]*e.g[1]+i[s]*r.g[1],t.g[2]+=i[a]*e.g[2]+i[s]*r.g[2]}function N(t,e){var r=dt(e),i=e.a,a=r.a;if(g(i.a,a.a)){if(0<y(a.b.a,i.a,a.a))return!1;if(_(i.a,a.a)){if(i.a!==a.a){r=t.e;var n=i.a.h;if(0<=n){var o=(r=r.b).d,s=r.e,l=r.c,h=l[n];o[h]=o[r.a],(l[o[h]]=h)<=--r.a&&(h<=1?lt(r,h):g(s[o[h>>1]],s[o[h]])?lt(r,h):ht(r,h)),s[n]=null,l[n]=r.b,r.b=n}else for(r.c[-(n+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;G(t,$(a),i)}}else M(a.b),C(i,$(a)),e.b=r.b=!0}else{if(y(i.b.a,a.a,i.a)<0)return!1;ft(e).b=e.b=!0,M(i.b),C($(a),i)}return!0}function V(t,e){var r=dt(e),i=e.a,a=r.a,n=i.a,o=a.a,s=i.b.a,l=a.b.a,h=new tt;if(y(s,t.a,n),y(l,t.a,o),n===o||Math.min(n.a,s.a)>Math.max(o.a,l.a))return!1;if(g(n,o)){if(0<y(l,n,o))return!1}else if(y(s,o,n)<0)return!1;var u,d,f=s,c=n,p=l,m=o;if(g(f,c)||(u=f,f=c,c=u),g(p,m)||(u=p,p=m,m=u),g(f,p)||(u=f,f=p,p=u,u=c,c=m,m=u),g(p,c)?g(c,m)?((u=v(f,p,c))+(d=v(p,c,m))<0&&(u=-u,d=-d),h.b=S(u,p.b,d,c.b)):((u=y(f,p,c))+(d=-y(f,m,c))<0&&(u=-u,d=-d),h.b=S(u,p.b,d,m.b)):h.b=(p.b+c.b)/2,b(f,c)||(u=f,f=c,c=u),b(p,m)||(u=p,p=m,m=u),b(f,p)||(u=f,f=p,p=u,u=c,c=m,m=u),b(p,c)?b(c,m)?((u=x(f,p,c))+(d=x(p,c,m))<0&&(u=-u,d=-d),h.a=S(u,p.a,d,c.a)):((u=w(f,p,c))+(d=-w(f,m,c))<0&&(u=-u,d=-d),h.a=S(u,p.a,d,m.a)):h.a=(p.a+c.a)/2,g(h,t.a)&&(h.b=t.a.b,h.a=t.a.a),g(f=g(n,o)?n:o,h)&&(h.b=f.b,h.a=f.a),_(h,n)||_(h,o))return N(t,e),!1;if(!_(s,t.a)&&0<=y(s,t.a,h)||!_(l,t.a)&&y(l,t.a,h)<=0){if(l===t.a)return M(i.b),C(a.b,i),i=dt(e=R(e)).a,O(t,dt(e),r),k(t,e,$(i),i,i,!0),!0;if(s!==t.a)return 0<=y(s,t.a,h)&&(ft(e).b=e.b=!0,M(i.b),i.a.b=t.a.b,i.a.a=t.a.a),y(l,t.a,h)<=0&&(e.b=r.b=!0,M(a.b),a.a.b=t.a.b,a.a.a=t.a.a),!1;for(M(a.b),C(i.e,$(a)),o=(n=r=e).a.b.a;(n=ft(n)).a.b.a===o;);return n=dt(e=n).a.b.c,r.a=$(a),k(t,e,(a=O(t,r,null)).c,i.b.c,n,!0),!0}return M(i.b),M(a.b),C($(a),i),i.a.b=h.b,i.a.a=h.a,i.a.h=rt(t.e,i.a),i=i.a,a=[0,0,0,0],h=[n.d,s.d,o.d,l.d],i.g[0]=i.g[1]=i.g[2]=0,j(i,n,s,a,0),j(i,o,l,a,2),F(t,i,h,a,!0),ft(e).b=e.b=r.b=!0,!1}function B(t,e){for(var r=dt(e);;){for(;r.b;)r=dt(e=r);if(!e.b&&(null===(e=ft(r=e))||!e.b))break;e.b=!1;var i,a=e.a,n=r.a;if(i=a.b.a!==n.b.a)t:{var o=dt(i=e),s=i.a,l=o.a,h=void 0;if(g(s.b.a,l.b.a)){if(y(s.b.a,l.b.a,s.a)<0){i=!1;break t}ft(i).b=i.b=!0,h=M(s),C(l.b,h),h.d.c=i.d}else{if(0<y(l.b.a,s.b.a,l.a)){i=!1;break t}i.b=o.b=!0,h=M(l),C(s.e,l.b),h.b.d.c=i.d}i=!0}if(i&&(r.c?(T(r),d(n),n=(r=dt(e)).a):e.c&&(T(e),d(a),a=(e=ft(r)).a)),a.a!==n.a)if(a.b.a===n.b.a||e.c||r.c||a.b.a!==t.a&&n.b.a!==t.a)N(t,e);else if(V(t,e))break;a.a===n.a&&a.b.a===n.b.a&&(L(n,a),T(e),d(a),e=ft(r))}}function U(t,e){for(var r=(t.a=e).c;null===r.i;)if((r=r.c)===e.c){r=t;var i=e;(o=new ut).a=i.c.b;for(var a=(l=r.f).a;null!==(a=a.a).b&&!l.c(l.b,o,a.b););var n=dt(l=a.b),o=l.a;a=n.a;if(0===y(o.b.a,i,o.a))_((o=l.a).a,i)||_(o.b.a,i)||(M(o.b),l.c&&(d(o.c),l.c=!1),C(i.c,o),U(r,i));else{var s=g(a.b.a,o.b.a)?l:n;n=void 0;l.d||s.c?(n=s===l?f(i.c.b,o.e):f(a.b.c.b,i.c).b,s.c?u(s,n):((l=A(o=r,l,n)).f=ft(l).f+l.a.f,l.d=D(o,l.f)),U(r,i)):k(r,l,i.c,i.c,null,!0)}return}if(l=(o=dt(r=R(r.i))).a,(o=O(t,o,null)).c===l){o=(l=o).c,a=dt(r),n=r.a,s=a.a;var l,h=!1;n.b.a!==s.b.a&&V(t,r),_(n.a,t.a)&&(C($(o),n),o=dt(r=R(r)).a,O(t,dt(r),a),h=!0),_(s.a,t.a)&&(C(l,$(s)),l=O(t,a,null),h=!0),h?k(t,r,l.c,o,o,!0):(i=g(s.a,n.a)?$(s):n,k(t,r,i=f(l.c.b,i),i.c,i.c,!1),i.b.i.c=!0,B(t,r))}else k(t,r,o.c,l,l,!0)}function z(t,e){var r=new ut,i=o(t.b);i.a.b=E,i.a.a=e,i.b.a.b=-E,i.b.a.a=e,t.a=i.b.a,r.a=i,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,i=W(i=t.f,i.a,r),r.e=i}function H(t){this.a=new q,this.b=t,this.c=h}function W(t,e,r){for(;null!==(e=e.c).b&&!t.c(t.b,e.b,r););return t=new q(r,e.a,e),e.a.c=t,e.a=t}function q(t,e,r){this.b=t||null,this.a=e||this,this.c=r||this}function X(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Y(t,e){if(t.d!==e)for(;t.d!==e;)if(t.d<e)switch(t.d){case 0:Z(t,100151),t.u(null);break;case 1:Z(t,100152),t.t()}else switch(t.d){case 2:Z(t,100154),t.v();break;case 1:Z(t,100153),t.w()}}function Z(t,e){t.p&&t.p(e,t.c)}function Q(t,e){this.b=t||this,this.d=e||this,this.a=null,this.c=!1}function K(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function $(t){return t.b.e}function J(){this.c=new tt,this.a=new Q,this.b=new K,this.d=new K,this.b.b=this.d,this.d.b=this.b}function tt(t,e){this.e=t||this,this.f=e||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function et(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new at}function rt(t,e){if(t.e){var r,i=t.b,a=++i.a;return 2*a>i.f&&(i.f*=2,i.c=nt(i.c,i.f+1)),0===i.b?r=a:(r=i.b,i.b=i.c[i.b]),i.e[r]=e,i.c[r]=a,i.d[a]=r,i.h&&ht(i,a),r}return i=t.a++,t.c[i]=e,-(i+1)}function it(t){if(0===t.a)return st(t.b);var e=t.c[t.d[t.a-1]];if(0!==t.b.a&&g(ot(t.b),e))return st(t.b);for(;--t.a,0<t.a&&null===t.c[t.d[t.a-1]];);return e}function at(){this.d=nt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function nt(t,e){for(var r=Array(e),i=0;i<t.length;i++)r[i]=t[i];for(;i<e;i++)r[i]=0;return r}function ot(t){return t.e[t.d[1]]}function st(t){var e=t.d,r=t.e,i=t.c,a=e[1],n=r[a];return 0<t.a&&(e[1]=e[t.a],i[e[1]]=1,r[a]=null,i[a]=t.b,t.b=a,0<--t.a&&lt(t,1)),n}function lt(t,e){for(var r=t.d,i=t.e,a=t.c,n=e,o=r[n];;){var s=n<<1;s<t.a&&g(i[r[s+1]],i[r[s]])&&(s+=1);var l=r[s];if(s>t.a||g(i[o],i[l])){a[r[n]=o]=n;break}a[r[n]=l]=n,n=s}}function ht(t,e){for(var r=t.d,i=t.e,a=t.c,n=e,o=r[n];;){var s=n>>1,l=r[s];if(0===s||g(i[l],i[o])){a[r[n]=o]=n;break}a[r[n]=l]=n,n=s}}function ut(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function dt(t){return t.e.c.b}function ft(t){return t.e.a.b}(i=X.prototype).x=function(){Y(this,0)},i.B=function(t,e){switch(t){case 100142:return;case 100140:switch(e){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=e)}break;case 100141:return void(this.m=!!e);default:return void Z(this,100900)}Z(this,100901)},i.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Z(this,100900)}return!1},i.A=function(t,e,r){this.j[0]=t,this.j[1]=e,this.j[2]=r},i.z=function(t,e){var r=e||null;switch(t){case 100100:case 100106:this.h=r;break;case 100104:case 100110:this.l=r;break;case 100101:case 100107:this.k=r;break;case 100102:case 100108:this.i=r;break;case 100103:case 100109:this.p=r;break;case 100105:case 100111:this.o=r;break;case 100112:this.r=r;break;default:Z(this,100900)}},i.C=function(t,e){var r=!1,i=[0,0,0];Y(this,2);for(var a=0;a<3;++a){var n=t[a];n<-1e150&&(n=-1e150,r=!0),1e150<n&&(n=1e150,r=!0),i[a]=n}r&&Z(this,100155),null===(r=this.q)?C(r=o(this.b),r.b):(M(r),r=r.e),r.a.d=e,r.a.g[0]=i[0],r.a.g[1]=i[1],r.a.g[2]=i[2],r.f=1,r.b.f=-1,this.q=r},i.u=function(t){Y(this,0),this.d=1,this.b=new J,this.c=t},i.t=function(){Y(this,1),this.d=2,this.q=null},i.v=function(){Y(this,2),this.d=1},i.w=function(){Y(this,1),this.d=0;var t,e,r=!1,i=[l=this.j[0],a=this.j[1],o=this.j[2]];if(0===l&&0===a&&0===o){for(var a=[-2e150,-2e150,-2e150],n=[2e150,2e150,2e150],o=[],s=[],l=(r=this.b.c).e;l!==r;l=l.e)for(var h=0;h<3;++h){var u=l.g[h];u<n[h]&&(n[h]=u,s[h]=l),u>a[h]&&(a[h]=u,o[h]=l)}if(l=0,a[1]-n[1]>a[0]-n[0]&&(l=1),a[2]-n[2]>a[l]-n[l]&&(l=2),n[l]>=a[l])i[0]=0,i[1]=0,i[2]=1;else{for(a=0,n=s[l],o=o[l],s=[0,0,0],n=[n.g[0]-o.g[0],n.g[1]-o.g[1],n.g[2]-o.g[2]],h=[0,0,0],l=r.e;l!==r;l=l.e)h[0]=l.g[0]-o.g[0],h[1]=l.g[1]-o.g[1],h[2]=l.g[2]-o.g[2],s[0]=n[1]*h[2]-n[2]*h[1],s[1]=n[2]*h[0]-n[0]*h[2],s[2]=n[0]*h[1]-n[1]*h[0],a<(u=s[0]*s[0]+s[1]*s[1]+s[2]*s[2])&&(a=u,i[0]=s[0],i[1]=s[1],i[2]=s[2]);a<=0&&(i[0]=i[1]=i[2]=0,i[P(n)]=1)}r=!0}for(s=P(i),l=this.b.c,a=(s+1)%3,o=(s+2)%3,s=0<i[s]?1:-1,i=l.e;i!==l;i=i.e)i.b=i.g[a],i.a=s*i.g[o];if(r){for(i=0,l=(r=this.b.a).b;l!==r;l=l.b)if(!((a=l.a).f<=0))for(;i+=(a.a.b-a.b.a.b)*(a.a.a+a.b.a.a),(a=a.e)!==l.a;);if(i<0)for(r=(i=this.b.c).e;r!==i;r=r.e)r.a=-r.a}for(this.n=!1,l=(i=this.b.b).h;l!==i;l=r)r=l.h,a=l.e,_(l.a,l.b.a)&&l.e.e!==l&&(G(this,a,l),d(l),a=(l=a).e),a.e===l&&(a!==l&&(a!==r&&a!==r.b||(r=r.h),d(a)),l!==r&&l!==r.b||(r=r.h),d(l));for(this.e=i=new et,l=(r=this.b.c).e;l!==r;l=l.e)l.h=rt(i,l);for(function(t){t.d=[];for(var e=0;e<t.a;e++)t.d[e]=e;t.d.sort((r=t.c,function(t,e){return g(r[t],r[e])?1:-1})),t.e=!0,function(t){for(var e=t.a;1<=e;--e)lt(t,e);t.h=!0}(t.b);var r}(i),this.f=new H(this),z(this,-E),z(this,E);null!==(i=it(this.e));){for(;;){t:if(l=this.e,0===l.a)r=ot(l.b);else if(r=l.c[l.d[l.a-1]],0!==l.b.a&&(l=ot(l.b),g(l,r))){r=l;break t}if(null===r||!_(r,i))break;r=it(this.e),G(this,i.c,r.c)}U(this,i)}for(this.a=this.f.a.a.b.a.a,i=0;null!==(r=this.f.a.a.b);)r.h||++i,T(r);for(this.f=null,(i=this.e).b=null,i.d=null,this.e=i.c=null,l=(i=this.b).a.b;l!==i.a;l=r)r=l.b,(l=l.a).e.e===l&&(L(l.c,l),d(l));if(!this.n){if(i=this.b,this.m)for(l=i.b.h;l!==i.b;l=r)r=l.h,l.b.d.c!==l.d.c?l.f=l.d.c?1:-1:d(l);else for(l=i.a.b;l!==i.a;l=r)if(r=l.b,l.c){for(l=l.a;g(l.b.a,l.a);l=l.c.b);for(;g(l.a,l.b.a);l=l.e);for(a=l.c.b,o=void 0;l.e!==a;)if(g(l.b.a,a.a)){for(;a.e!==l&&(g((e=a.e).b.a,e.a)||y(a.a,a.b.a,a.e.b.a)<=0);)a=(o=f(a.e,a)).b;a=a.c.b}else{for(;a.e!==l&&(g((t=l.c.b).a,t.b.a)||0<=y(l.b.a,l.a,l.c.b.a));)l=(o=f(l,l.c.b)).b;l=l.e}for(;a.e.e!==l;)a=(o=f(a.e,a)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(r=(i=this.b).a.b;r!==i.a;r=r.b)if(r.c){for(this.h&&this.h(2,this.c),l=r.a;this.k&&this.k(l.a.d,this.c),(l=l.e)!==r.a;);this.i&&this.i(this.c)}}else{for(i=this.b,r=!!this.l,l=!1,a=-1,o=i.a.d;o!==i.a;o=o.d)if(o.c)for(l||(this.h&&this.h(4,this.c),l=!0),s=o.a;r&&(a!==(n=s.b.d.c?0:1)&&(a=n,this.l&&this.l(!!a,this.c))),this.k&&this.k(s.a.d,this.c),(s=s.e)!==o.a;);l&&this.i&&this.i(this.c)}if(this.r){for(l=(i=this.b).a.b;l!==i.a;l=r)if(r=l.b,!l.c){for(o=(a=l.a).e,s=void 0;o=(s=o).e,(s.d=null)===s.b.d&&(s.c===s?m(s.a,null):(s.a.c=s.c,c(s,$(s))),(n=s.b).c===n?m(n.a,null):(n.a.c=n.c,c(n,$(n))),p(s)),s!==a;);a=l.d,((l=l.b).d=a).b=l}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,void 0!==e&&(e.exports=this.libtess)},{}],2:[function(t,e,r){"use strict";function L(t,e,r,i){for(var a=t[e++],n=1<<a,o=n+1,s=o+1,l=a+1,h=(1<<l)-1,u=0,d=0,f=0,c=t[e++],p=new Int32Array(4096),m=null;;){for(;u<16&&0!==c;)d|=t[e++]<<u,u+=8,1===c?c=t[e++]:--c;if(u<l)break;var _=d&h;if(d>>=l,u-=l,_!==n){if(_===o)break;for(var g=_<s?_:m,v=0,y=g;n<y;)y=p[y]>>8,++v;var b=y;if(i<f+v+(g!==_?1:0))return void console.log("Warning, gif stream longer than expected.");r[f++]=b;var x=f+=v;for(g!==_&&(r[f++]=b),y=g;v--;)y=p[y],r[--x]=255&y,y>>=8;null!==m&&s<4096&&(p[s++]=m<<8|b,h+1<=s&&l<12&&(++l,h=h<<1|1)),m=_}else s=o+1,h=(1<<(l=a+1))-1,m=null}return f!==i&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=function(g,t,e,r){var v=0,i=void 0===(r=void 0===r?{}:r).loop?null:r.loop,y=void 0===r.palette?null:r.palette;if(t<=0||e<=0||65535<t||65535<e)throw new Error("Width/Height invalid.");function b(t){var e=t.length;if(e<2||256<e||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}g[v++]=71,g[v++]=73,g[v++]=70,g[v++]=56,g[v++]=57,g[v++]=97;var a=0,n=0;if(null!==y){for(var o=b(y);o>>=1;)++a;if(o=1<<a,--a,void 0!==r.background){if(o<=(n=r.background))throw new Error("Background index out of range.");if(0===n)throw new Error("Background index explicitly passed as 0.")}}if(g[v++]=255&t,g[v++]=t>>8&255,g[v++]=255&e,g[v++]=e>>8&255,g[v++]=(null!==y?128:0)|a,g[v++]=n,g[v++]=0,null!==y)for(var s=0,l=y.length;s<l;++s){var h=y[s];g[v++]=h>>16&255,g[v++]=h>>8&255,g[v++]=255&h}if(null!==i){if(i<0||65535<i)throw new Error("Loop count invalid.");g[v++]=33,g[v++]=255,g[v++]=11,g[v++]=78,g[v++]=69,g[v++]=84,g[v++]=83,g[v++]=67,g[v++]=65,g[v++]=80,g[v++]=69,g[v++]=50,g[v++]=46,g[v++]=48,g[v++]=3,g[v++]=1,g[v++]=255&i,g[v++]=i>>8&255,g[v++]=0}var x=!1;this.addFrame=function(t,e,r,i,a,n){if(!0===x&&(--v,x=!1),n=void 0===n?{}:n,t<0||e<0||65535<t||65535<e)throw new Error("x/y invalid.");if(r<=0||i<=0||65535<r||65535<i)throw new Error("Width/Height invalid.");if(a.length<r*i)throw new Error("Not enough pixels for the frame size.");var o=!0,s=n.palette;if(null==s&&(o=!1,s=y),null==s)throw new Error("Must supply either a local or global palette.");for(var l=b(s),h=0;l>>=1;)++h;l=1<<h;var u=void 0===n.delay?0:n.delay,d=void 0===n.disposal?0:n.disposal;if(d<0||3<d)throw new Error("Disposal out of range.");var f=!1,c=0;if(void 0!==n.transparent&&null!==n.transparent&&(f=!0,(c=n.transparent)<0||l<=c))throw new Error("Transparent color index.");if((0!==d||f||0!==u)&&(g[v++]=33,g[v++]=249,g[v++]=4,g[v++]=d<<2|(!0===f?1:0),g[v++]=255&u,g[v++]=u>>8&255,g[v++]=c,g[v++]=0),g[v++]=44,g[v++]=255&t,g[v++]=t>>8&255,g[v++]=255&e,g[v++]=e>>8&255,g[v++]=255&r,g[v++]=r>>8&255,g[v++]=255&i,g[v++]=i>>8&255,g[v++]=!0===o?128|h-1:0,!0===o)for(var p=0,m=s.length;p<m;++p){var _=s[p];g[v++]=_>>16&255,g[v++]=_>>8&255,g[v++]=255&_}return v=function(e,r,t,i){e[r++]=t;var a=r++,n=1<<t,o=n-1,s=n+1,l=s+1,h=t+1,u=0,d=0;function f(t){for(;t<=u;)e[r++]=255&d,d>>=8,u-=8,r===a+256&&(e[a]=255,a=r++)}function c(t){d|=t<<u,u+=h,f(8)}var p=i[0]&o,m={};c(n);for(var _=1,g=i.length;_<g;++_){var v=i[_]&o,y=p<<8|v,b=m[y];if(void 0===b){for(d|=p<<u,u+=h;8<=u;)e[r++]=255&d,d>>=8,u-=8,r===a+256&&(e[a]=255,a=r++);4096===l?(c(n),l=s+1,h=t+1,m={}):(1<<h<=l&&++h,m[y]=l++),p=v}else p=b}return c(p),c(s),f(1),a+1===r?e[a]=0:(e[a]=r-a-1,e[r++]=0),r}(g,v,h<2?2:h,a)},this.end=function(){return!1===x&&(g[v++]=59,x=!0),v},this.getOutputBuffer=function(){return g},this.setOutputBuffer=function(t){g=t},this.getOutputBufferPosition=function(){return v},this.setOutputBufferPosition=function(t){v=t}},r.GifReader=function(x){var t=0;if(71!==x[t++]||73!==x[t++]||70!==x[t++]||56!==x[t++]||56!=(x[t++]+1&253)||97!==x[t++])throw new Error("Invalid GIF 87a/89a header.");var w=x[t++]|x[t++]<<8,e=x[t++]|x[t++]<<8,r=x[t++],i=r>>7,a=1<<1+(7&r);x[t++],x[t++];var n=null,o=null;i&&(n=t,t+=3*(o=a));var s=!0,l=[],h=0,u=null,d=0,f=null;for(this.width=w,this.height=e;s&&t<x.length;)switch(x[t++]){case 33:switch(x[t++]){case 255:if(11!==x[t]||78==x[t+1]&&69==x[t+2]&&84==x[t+3]&&83==x[t+4]&&67==x[t+5]&&65==x[t+6]&&80==x[t+7]&&69==x[t+8]&&50==x[t+9]&&46==x[t+10]&&48==x[t+11]&&3==x[t+12]&&1==x[t+13]&&0==x[t+16])t+=14,f=x[t++]|x[t++]<<8,t++;else for(t+=12;;){if(!(0<=(E=x[t++])))throw Error("Invalid block size");if(0===E)break;t+=E}break;case 249:if(4!==x[t++]||0!==x[t+4])throw new Error("Invalid graphics extension block.");var c=x[t++];h=x[t++]|x[t++]<<8,u=x[t++],0==(1&c)&&(u=null),d=c>>2&7,t++;break;case 254:for(;;){if(!(0<=(E=x[t++])))throw Error("Invalid block size");if(0===E)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+x[t-1].toString(16))}break;case 44:var p=x[t++]|x[t++]<<8,m=x[t++]|x[t++]<<8,_=x[t++]|x[t++]<<8,g=x[t++]|x[t++]<<8,v=x[t++],y=v>>6&1,b=1<<1+(7&v),S=n,C=o,M=!1;v>>7&&(M=!0,S=t,t+=3*(C=b));var P=t;for(t++;;){var E;if(!(0<=(E=x[t++])))throw Error("Invalid block size");if(0===E)break;t+=E}l.push({x:p,y:m,width:_,height:g,has_local_palette:M,palette_offset:S,palette_size:C,data_offset:P,data_length:t-P,transparent_index:u,interlaced:!!y,delay:h,disposal:d});break;case 59:s=!1;break;default:throw new Error("Unknown gif block: 0x"+x[t-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return f},this.frameInfo=function(t){if(t<0||t>=l.length)throw new Error("Frame index out of range.");return l[t]},this.decodeAndBlitFrameBGRA=function(t,e){var r=this.frameInfo(t),i=r.width*r.height,a=new Uint8Array(i);L(x,r.data_offset,a,i);var n=r.palette_offset,o=r.transparent_index;null===o&&(o=256);var s=r.width,l=w-s,h=s,u=4*(r.y*w+r.x),d=4*((r.y+r.height)*w+r.x),f=u,c=4*l;!0===r.interlaced&&(c+=4*w*7);for(var p=8,m=0,_=a.length;m<_;++m){var g=a[m];if(0===h&&(h=s,d<=(f+=c)&&(c=4*l+4*w*(p-1),f=u+(s+l)*(p<<1),p>>=1)),g===o)f+=4;else{var v=x[n+3*g],y=x[n+3*g+1],b=x[n+3*g+2];e[f++]=b,e[f++]=y,e[f++]=v,e[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,e){var r=this.frameInfo(t),i=r.width*r.height,a=new Uint8Array(i);L(x,r.data_offset,a,i);var n=r.palette_offset,o=r.transparent_index;null===o&&(o=256);var s=r.width,l=w-s,h=s,u=4*(r.y*w+r.x),d=4*((r.y+r.height)*w+r.x),f=u,c=4*l;!0===r.interlaced&&(c+=4*w*7);for(var p=8,m=0,_=a.length;m<_;++m){var g=a[m];if(0===h&&(h=s,d<=(f+=c)&&(c=4*l+4*w*(p-1),f=u+(s+l)*(p<<1),p>>=1)),g===o)f+=4;else{var v=x[n+3*g],y=x[n+3*g+1],b=x[n+3*g+2];e[f++]=v,e[f++]=y,e[f++]=b,e[f++]=255}--h}}}}catch(t){}},{}],3:[function(t,e,h){(function(a){function n(t,e){for(var r=0,i=t.length-1;0<=i;i--){var a=t[i];"."===a?t.splice(i,1):".."===a?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function o(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}h.resolve=function(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){var i=0<=r?arguments[r]:a.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,e="/"===i.charAt(0))}return(e?"/":"")+(t=n(o(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},h.normalize=function(t){var e=h.isAbsolute(t),r="/"===i(t,-1);return(t=n(o(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},h.isAbsolute=function(t){return"/"===t.charAt(0)},h.join=function(){var t=Array.prototype.slice.call(arguments,0);return h.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},h.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=h.resolve(t).substr(1),e=h.resolve(e).substr(1);for(var i=r(t.split("/")),a=r(e.split("/")),n=Math.min(i.length,a.length),o=n,s=0;s<n;s++)if(i[s]!==a[s]){o=s;break}var l=[];for(s=o;s<i.length;s++)l.push("..");return(l=l.concat(a.slice(o))).join("/")},h.sep="/",h.delimiter=":",h.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,i=-1,a=!0,n=t.length-1;1<=n;--n)if(47===(e=t.charCodeAt(n))){if(!a){i=n;break}}else a=!1;return-1===i?r?"/":".":r&&1===i?"/":t.slice(0,i)},h.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,i=-1,a=!0;for(e=t.length-1;0<=e;--e)if(47===t.charCodeAt(e)){if(!a){r=e+1;break}}else-1===i&&(a=!1,i=e+1);return-1===i?"":t.slice(r,i)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},h.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,i=-1,a=!0,n=0,o=t.length-1;0<=o;--o){var s=t.charCodeAt(o);if(47===s){if(a)continue;r=o+1;break}-1===i&&(a=!1,i=o+1),46===s?-1===e?e=o:1!==n&&(n=1):-1!==e&&(n=-1)}return-1===e||-1===i||0===n||1===n&&e===i-1&&e===r+1?"":t.slice(e,i)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:4}],4:[function(t,e,r){var i,a,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(t){a=s}}();var h,u=[],d=!1,f=-1;function c(){d&&h&&(d=!1,h.length?u=h.concat(u):f=-1,u.length&&p())}function p(){if(!d){var t=l(c);d=!0;for(var e=u.length;e;){for(h=u,u=[];++f<e;)h&&h[f].run();f=-1,e=u.length}h=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function _(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new m(t,e)),1!==u.length||d||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i};a.default.ColorConversion={},a.default.ColorConversion._hsbaToHSLA=function(t){var e=t[0],r=t[1],i=t[2],a=(2-r)*i/2;return 0!==a&&(1===a?r=0:a<.5?r/=2-r:r=r*i/(2-2*a)),[e,r,a,t[3]]},a.default.ColorConversion._hsbaToRGBA=function(t){var e=6*t[0],r=t[1],i=t[2],a=[];if(0===r)a=[i,i,i,t[3]];else{var n,o,s,l=Math.floor(e),h=i*(1-r),u=i*(1-r*(e-l)),d=i*(1-r*(1+l-e));s=1===l?(n=u,o=i,h):2===l?(n=h,o=i,d):3===l?(n=h,o=u,i):4===l?(n=d,o=h,i):5===l?(n=i,o=h,u):(n=i,o=d,h),a=[n,o,s,t[3]]}return a},a.default.ColorConversion._hslaToHSBA=function(t){var e,r=t[0],i=t[1],a=t[2];return[r,i=2*((e=a<.5?(1+i)*a:a+i-a*i)-a)/e,e,t[3]]},a.default.ColorConversion._hslaToRGBA=function(t){var e=6*t[0],r=t[1],i=t[2],a=[];if(0===r)a=[i,i,i,t[3]];else{var n,o=2*i-(n=i<.5?(1+r)*i:i+r-i*r),s=function(t,e,r){return t<0?t+=6:6<=t&&(t-=6),t<1?e+(r-e)*t:t<3?r:t<4?e+(r-e)*(4-t):e};a=[s(e+2,o,n),s(e,o,n),s(e-2,o,n),t[3]]}return a},a.default.ColorConversion._rgbaToHSBA=function(t){var e,r,i=t[0],a=t[1],n=t[2],o=Math.max(i,a,n),s=o-Math.min(i,a,n);return 0===s?r=e=0:(r=s/o,i===o?e=(a-n)/s:a===o?e=2+(n-i)/s:n===o&&(e=4+(i-a)/s),e<0?e+=6:6<=e&&(e-=6)),[e/6,r,o,t[3]]},a.default.ColorConversion._rgbaToHSLA=function(t){var e,r,i=t[0],a=t[1],n=t[2],o=Math.max(i,a,n),s=Math.min(i,a,n),l=o+s,h=o-s;return 0===h?r=e=0:(r=l<1?h/l:h/(2-l),i===o?e=(a-n)/h:a===o?e=2+(n-i)/h:n===o&&(e=4+(i-a)/h),e<0?e+=6:6<=e&&(e-=6)),[e/6,r,l/2,t[3]]};var n=a.default.ColorConversion;r.default=n},{"../core/main":15}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,d=(i=t("../core/main"))&&i.__esModule?i:{default:i},f=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants"));t("./p5.Color"),t("../core/error_helpers"),d.default.prototype.alpha=function(t){return d.default._validateParameters("alpha",arguments),this.color(t)._getAlpha()},d.default.prototype.blue=function(t){return d.default._validateParameters("blue",arguments),this.color(t)._getBlue()},d.default.prototype.brightness=function(t){return d.default._validateParameters("brightness",arguments),this.color(t)._getBrightness()},d.default.prototype.color=function(){if(d.default._validateParameters("color",arguments),arguments[0]instanceof d.default.Color)return arguments[0];var t=arguments[0]instanceof Array?arguments[0]:arguments;return new d.default.Color(this,t)},d.default.prototype.green=function(t){return d.default._validateParameters("green",arguments),this.color(t)._getGreen()},d.default.prototype.hue=function(t){return d.default._validateParameters("hue",arguments),this.color(t)._getHue()},d.default.prototype.lerpColor=function(t,e,r){d.default._validateParameters("lerpColor",arguments);var i,a,n,o,s,l,h=this._colorMode,u=this._colorMaxes;if(h===f.RGB)s=t.levels.map(function(t){return t/255}),l=e.levels.map(function(t){return t/255});else if(h===f.HSB)t._getBrightness(),e._getBrightness(),s=t.hsba,l=e.hsba;else{if(h!==f.HSL)throw new Error("".concat(h,"cannot be used for interpolation."));t._getLightness(),e._getLightness(),s=t.hsla,l=e.hsla}return r=Math.max(Math.min(r,1),0),void 0===this.lerp&&(this.lerp=function(t,e,r){return r*(e-t)+t}),i=this.lerp(s[0],l[0],r),a=this.lerp(s[1],l[1],r),n=this.lerp(s[2],l[2],r),o=this.lerp(s[3],l[3],r),i*=u[h][0],a*=u[h][1],n*=u[h][2],o*=u[h][3],this.color(i,a,n,o)},d.default.prototype.lightness=function(t){return d.default._validateParameters("lightness",arguments),this.color(t)._getLightness()},d.default.prototype.red=function(t){return d.default._validateParameters("red",arguments),this.color(t)._getRed()},d.default.prototype.saturation=function(t){return d.default._validateParameters("saturation",arguments),this.color(t)._getSaturation()};var a=d.default;r.default=a},{"../core/constants":9,"../core/error_helpers":11,"../core/main":15,"./p5.Color":7}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=i(t("../core/main")),f=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants")),c=i(t("./color_conversion"));function i(t){return t&&t.__esModule?t:{default:t}}d.default.Color=function(t,e){if(this._storeModeAndMaxes(t._colorMode,t._colorMaxes),this.mode!==f.RGB&&this.mode!==f.HSL&&this.mode!==f.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=d.default.Color._parseInputs.apply(this,e),this._calculateLevels(),this},d.default.Color.prototype.toString=function(t){var e=this.levels,r=this._array,i=r[3];switch(t){case"#rrggbb":return"#".concat(e[0]<16?"0".concat(e[0].toString(16)):e[0].toString(16),e[1]<16?"0".concat(e[1].toString(16)):e[1].toString(16),e[2]<16?"0".concat(e[2].toString(16)):e[2].toString(16));case"#rrggbbaa":return"#".concat(e[0]<16?"0".concat(e[0].toString(16)):e[0].toString(16),e[1]<16?"0".concat(e[1].toString(16)):e[1].toString(16),e[2]<16?"0".concat(e[2].toString(16)):e[2].toString(16),e[3]<16?"0".concat(e[2].toString(16)):e[3].toString(16));case"#rgb":return"#".concat(Math.round(15*r[0]).toString(16),Math.round(15*r[1]).toString(16),Math.round(15*r[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*r[0]).toString(16),Math.round(15*r[1]).toString(16),Math.round(15*r[2]).toString(16),Math.round(15*r[3]).toString(16));case"rgb":return"rgb(".concat(e[0],", ",e[1],", ",e[2],")");case"rgb%":return"rgb(".concat((100*r[0]).toPrecision(3),"%, ",(100*r[1]).toPrecision(3),"%, ",(100*r[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*r[0]).toPrecision(3),"%, ",(100*r[1]).toPrecision(3),"%, ",(100*r[2]).toPrecision(3),"%, ",(100*r[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],", ",i,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*i).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],", ",i,")");case"hsla%":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*i).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(e[0],",",e[1],",",e[2],",",i,")")}},d.default.Color.prototype.setRed=function(t){this._array[0]=t/this.maxes[f.RGB][0],this._calculateLevels()},d.default.Color.prototype.setGreen=function(t){this._array[1]=t/this.maxes[f.RGB][1],this._calculateLevels()},d.default.Color.prototype.setBlue=function(t){this._array[2]=t/this.maxes[f.RGB][2],this._calculateLevels()},d.default.Color.prototype.setAlpha=function(t){this._array[3]=t/this.maxes[this.mode][3],this._calculateLevels()},d.default.Color.prototype._calculateLevels=function(){for(var t=this._array,e=this.levels=new Array(t.length),r=t.length-1;0<=r;--r)e[r]=Math.round(255*t[r])},d.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},d.default.Color.prototype._storeModeAndMaxes=function(t,e){this.mode=t,this.maxes=e},d.default.Color.prototype._getMode=function(){return this.mode},d.default.Color.prototype._getMaxes=function(){return this.maxes},d.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[f.RGB][2]},d.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[f.HSB][2]},d.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[f.RGB][1]},d.default.Color.prototype._getHue=function(){return this.mode===f.HSB?(this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[f.HSB][0]):(this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[f.HSL][0])},d.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[f.HSL][2]},d.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[f.RGB][0]},d.default.Color.prototype._getSaturation=function(){return this.mode===f.HSB?(this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[f.HSB][1]):(this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[f.HSL][1])};var p={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,n=/(\d{1,3})/,o=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,s=new RegExp("".concat(o.source,"%")),m={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",n.source,",",n.source,",",n.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",s.source,",",s.source,",",s.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",n.source,",",n.source,",",n.source,",",o.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",s.source,",",s.source,",",s.source,",",o.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",n.source,",",s.source,",",s.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",n.source,",",s.source,",",s.source,",",o.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",n.source,",",s.source,",",s.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",n.source,",",s.source,",",s.source,",",o.source,"\\)$"].join(a.source),"i")};d.default.Color._parseInputs=function(t,e,r,i){var a,n=arguments.length,o=this.mode,s=this.maxes[o],l=[];if(3<=n){for(l[0]=t/s[0],l[1]=e/s[1],l[2]=r/s[2],l[3]="number"==typeof i?i/s[3]:1,a=l.length-1;0<=a;--a){var h=l[a];h<0?l[a]=0:1<h&&(l[a]=1)}return o===f.HSL?c.default._hslaToRGBA(l):o===f.HSB?c.default._hsbaToRGBA(l):l}if(1===n&&"string"==typeof t){var u=t.trim().toLowerCase();if(p[u])return d.default.Color._parseInputs.call(this,p[u]);if(m.HEX3.test(u))return(l=m.HEX3.exec(u).slice(1).map(function(t){return parseInt(t+t,16)/255}))[3]=1,l;if(m.HEX6.test(u))return(l=m.HEX6.exec(u).slice(1).map(function(t){return parseInt(t,16)/255}))[3]=1,l;if(m.HEX4.test(u))return l=m.HEX4.exec(u).slice(1).map(function(t){return parseInt(t+t,16)/255});if(m.HEX8.test(u))return l=m.HEX8.exec(u).slice(1).map(function(t){return parseInt(t,16)/255});if(m.RGB.test(u))return(l=m.RGB.exec(u).slice(1).map(function(t){return t/255}))[3]=1,l;if(m.RGB_PERCENT.test(u))return(l=m.RGB_PERCENT.exec(u).slice(1).map(function(t){return parseFloat(t)/100}))[3]=1,l;if(m.RGBA.test(u))return l=m.RGBA.exec(u).slice(1).map(function(t,e){return 3===e?parseFloat(t):t/255});if(m.RGBA_PERCENT.test(u))return l=m.RGBA_PERCENT.exec(u).slice(1).map(function(t,e){return 3===e?parseFloat(t):parseFloat(t)/100});if(m.HSL.test(u)?(l=m.HSL.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}))[3]=1:m.HSLA.test(u)&&(l=m.HSLA.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),(l=l.map(function(t){return Math.max(Math.min(t,1),0)})).length)return c.default._hslaToRGBA(l);if(m.HSB.test(u)?(l=m.HSB.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}))[3]=1:m.HSBA.test(u)&&(l=m.HSBA.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),l.length){for(a=l.length-1;0<=a;--a)l[a]=Math.max(Math.min(l[a],1),0);return c.default._hsbaToRGBA(l)}l=[1,1,1,1]}else{if(1!==n&&2!==n||"number"!=typeof t)throw new Error("".concat(arguments,"is not a valid color representation."));l[0]=t/s[2],l[1]=t/s[2],l[2]=t/s[2],l[3]="number"==typeof e?e/s[3]:1,l=l.map(function(t){return Math.max(Math.min(t,1),0)})}return l};var l=d.default.Color;r.default=l},{"../core/constants":9,"../core/main":15,"./color_conversion":5}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,o=(i=t("../core/main"))&&i.__esModule?i:{default:i},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants"));t("./p5.Color"),o.default.prototype.background=function(){var t;return(t=this._renderer).background.apply(t,arguments),this},o.default.prototype.clear=function(){return this._renderer.clear(),this},o.default.prototype.colorMode=function(t,e,r,i,a){if(o.default._validateParameters("colorMode",arguments),t===s.RGB||t===s.HSB||t===s.HSL){this._colorMode=t;var n=this._colorMaxes[t];2===arguments.length?(n[0]=e,n[1]=e,n[2]=e,n[3]=e):4===arguments.length?(n[0]=e,n[1]=r,n[2]=i):5===arguments.length&&(n[0]=e,n[1]=r,n[2]=i,n[3]=a)}return this},o.default.prototype.fill=function(){var t;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(t=this._renderer).fill.apply(t,arguments),this},o.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},o.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},o.default.prototype.stroke=function(){var t;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(t=this._renderer).stroke.apply(t,arguments),this},o.default.prototype.erase=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;return this._renderer.erase(t,e),this},o.default.prototype.noErase=function(){return this._renderer.noErase(),this};var a=o.default;r.default=a},{"../core/constants":9,"../core/main":15,"./p5.Color":7}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TEXTURE=r.FILL=r.STROKE=r.CURVE=r.BEZIER=r.QUADRATIC=r.LINEAR=r._CTX_MIDDLE=r._DEFAULT_LEADMULT=r._DEFAULT_TEXT_FILL=r.BOLDITALIC=r.BOLD=r.ITALIC=r.NORMAL=r.BLUR=r.ERODE=r.DILATE=r.POSTERIZE=r.INVERT=r.OPAQUE=r.GRAY=r.THRESHOLD=r.BURN=r.DODGE=r.SOFT_LIGHT=r.HARD_LIGHT=r.OVERLAY=r.REPLACE=r.SCREEN=r.MULTIPLY=r.EXCLUSION=r.SUBTRACT=r.DIFFERENCE=r.LIGHTEST=r.DARKEST=r.ADD=r.REMOVE=r.BLEND=r.UP_ARROW=r.TAB=r.SHIFT=r.RIGHT_ARROW=r.RETURN=r.OPTION=r.LEFT_ARROW=r.ESCAPE=r.ENTER=r.DOWN_ARROW=r.DELETE=r.CONTROL=r.BACKSPACE=r.ALT=r.AUTO=r.HSL=r.HSB=r.RGB=r.MITER=r.BEVEL=r.ROUND=r.SQUARE=r.PROJECT=r.PIE=r.CHORD=r.OPEN=r.CLOSE=r.QUAD_STRIP=r.QUADS=r.TRIANGLE_STRIP=r.TRIANGLE_FAN=r.TRIANGLES=r.LINE_LOOP=r.LINE_STRIP=r.LINES=r.POINTS=r.BASELINE=r.BOTTOM=r.TOP=r.CENTER=r.LEFT=r.RIGHT=r.RADIUS=r.CORNERS=r.CORNER=r.RAD_TO_DEG=r.DEG_TO_RAD=r.RADIANS=r.DEGREES=r.TWO_PI=r.TAU=r.QUARTER_PI=r.PI=r.HALF_PI=r.WAIT=r.TEXT=r.MOVE=r.HAND=r.CROSS=r.ARROW=r.WEBGL=r.P2D=void 0,r.AXES=r.GRID=r._DEFAULT_FILL=r._DEFAULT_STROKE=r.PORTRAIT=r.LANDSCAPE=r.MIRROR=r.CLAMP=r.REPEAT=r.NEAREST=r.IMAGE=r.IMMEDIATE=void 0;var i=Math.PI;r.P2D="p2d";r.WEBGL="webgl";r.ARROW="default";r.CROSS="crosshair";r.HAND="pointer";r.MOVE="move";r.TEXT="text";r.WAIT="wait";var a=i/2;r.HALF_PI=a;var n=i;r.PI=n;var o=i/4;r.QUARTER_PI=o;var s=2*i;r.TAU=s;var l=2*i;r.TWO_PI=l;r.DEGREES="degrees";r.RADIANS="radians";var h=i/180;r.DEG_TO_RAD=h;var u=180/i;r.RAD_TO_DEG=u;r.CORNER="corner";r.CORNERS="corners";r.RADIUS="radius";r.RIGHT="right";r.LEFT="left";r.CENTER="center";r.TOP="top";r.BOTTOM="bottom";r.BASELINE="alphabetic";r.POINTS=0;r.LINES=1;r.LINE_STRIP=3;r.LINE_LOOP=2;r.TRIANGLES=4;r.TRIANGLE_FAN=6;r.TRIANGLE_STRIP=5;r.QUADS="quads";r.QUAD_STRIP="quad_strip";r.CLOSE="close";r.OPEN="open";r.CHORD="chord";r.PIE="pie";r.PROJECT="square";r.SQUARE="butt";r.ROUND="round";r.BEVEL="bevel";r.MITER="miter";r.RGB="rgb";r.HSB="hsb";r.HSL="hsl";r.AUTO="auto";r.ALT=18;r.BACKSPACE=8;r.CONTROL=17;r.DELETE=46;r.DOWN_ARROW=40;r.ENTER=13;r.ESCAPE=27;r.LEFT_ARROW=37;r.OPTION=18;r.RETURN=13;r.RIGHT_ARROW=39;r.SHIFT=16;r.TAB=9;r.UP_ARROW=38;r.BLEND="source-over";r.REMOVE="destination-out";r.ADD="lighter";r.DARKEST="darken";r.LIGHTEST="lighten";r.DIFFERENCE="difference";r.SUBTRACT="subtract";r.EXCLUSION="exclusion";r.MULTIPLY="multiply";r.SCREEN="screen";r.REPLACE="copy";r.OVERLAY="overlay";r.HARD_LIGHT="hard-light";r.SOFT_LIGHT="soft-light";r.DODGE="color-dodge";r.BURN="color-burn";r.THRESHOLD="threshold";r.GRAY="gray";r.OPAQUE="opaque";r.INVERT="invert";r.POSTERIZE="posterize";r.DILATE="dilate";r.ERODE="erode";r.BLUR="blur";r.NORMAL="normal";r.ITALIC="italic";r.BOLD="bold";r.BOLDITALIC="bold italic";r._DEFAULT_TEXT_FILL="#000000";r._DEFAULT_LEADMULT=1.25;r._CTX_MIDDLE="middle";r.LINEAR="linear";r.QUADRATIC="quadratic";r.BEZIER="bezier";r.CURVE="curve";r.STROKE="stroke";r.FILL="fill";r.TEXTURE="texture";r.IMMEDIATE="immediate";r.IMAGE="image";r.NEAREST="nearest";r.REPEAT="repeat";r.CLAMP="clamp";r.MIRROR="mirror";r.LANDSCAPE="landscape";r.PORTRAIT="portrait";r._DEFAULT_STROKE="#000000";r._DEFAULT_FILL="#FFFFFF";r.GRID="grid";r.AXES="axes"},{}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("./main"))&&i.__esModule?i:{default:i},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("./constants"));var o=[n.ARROW,n.CROSS,n.HAND,n.MOVE,n.TEXT,n.WAIT];a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60;var s=window.print;function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function h(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var t;arguments.length?(t=console).log.apply(t,arguments):s()},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(t,e,r){var i="auto",a=this._curElement.elt;if(o.includes(t))i=t;else if("string"==typeof t){var n="";e&&r&&"number"==typeof e&&"number"==typeof r&&(n="".concat(e," ").concat(r)),i="http://"===t.substring(0,7)||"https://"===t.substring(0,8)?"url(".concat(t,") ").concat(n,", auto"):/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url(".concat(t,") ").concat(n,", auto"):t}a.style.cursor=i},a.default.prototype.frameRate=function(t){return a.default._validateParameters("frameRate",arguments),"number"!=typeof t||t<0?this._frameRate:(this._setProperty("_targetFrameRate",t),0===t&&this._setProperty("_frameRate",t),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(t){return this.frameRate(t)},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=l(),a.default.prototype.windowHeight=h(),a.default.prototype._onresize=function(t){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",h());var e,r=this._isGlobal?window:this;"function"==typeof r.windowResized&&(void 0===(e=r.windowResized(t))||e||t.preventDefault())},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(t){if(a.default._validateParameters("fullscreen",arguments),void 0===t)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t?function(t){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(t){var e;return a.default._validateParameters("pixelDensity",arguments),"number"==typeof t?(t!==this._pixelDensity&&(this._pixelDensity=t,this._pixelsDirty=!0),(e=this).resizeCanvas(this.width,this.height,!0)):e=this._pixelDensity,e},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(t){return""!==t})},a.default.prototype.getURLParams=function(){for(var t,e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(t=e.exec(location.search));)t.index===e.lastIndex&&e.lastIndex++,r[t[1]]=t[2];return r};var u=a.default;r.default=u},{"./constants":9,"./main":15}],11:[function(a,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,n=(r=a("./main"))&&r.__esModule?r:{default:r};!function(t){{if(t&&t.__esModule)return;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}e.default=t}}(a("./constants"));n.default._validateParameters=n.default._friendlyFileLoadError=n.default._friendlyError=function(){};var o=null,i=function(e,r){var i,t;r||(r=console.log.bind(console)),o||(i={},(o=[].concat((t=function(r){return Object.getOwnPropertyNames(r).filter(function(t){return"_"!==t[0]&&!(t in i)&&(i[t]=!0)}).map(function(t){var e;return e="function"==typeof r[t]?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:e}})})(n.default.prototype),t(a("./constants")))).sort(function(t,e){return e.name.length-t.name.length})),o.some(function(t){if(e.message&&null!==e.message.match("\\W?".concat(t.name,"\\W")))return r("Did you just try to use p5.js's ".concat(t.name).concat("function"===t.type?"() ":" ").concat(t.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat("https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup")),!0})};n.default.prototype._helpForMisusedAtTopLevelCode=i,"complete"!==document.readyState&&(window.addEventListener("error",i,!1),window.addEventListener("load",function(){window.removeEventListener("error",i,!1)}));var s=n.default;e.default=s},{"../../docs/reference/data.json":void 0,"./constants":9,"./main":15}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("./constants"));var i={modeAdjust:function(t,e,r,i,a){return a===n.CORNER?{x:t,y:e,w:r,h:i}:a===n.CORNERS?{x:t,y:e,w:r-t,h:i-e}:a===n.RADIUS?{x:t-r,y:e-i,w:2*r,h:2*i}:a===n.CENTER?{x:t-.5*r,y:e-.5*i,w:r,h:i}:void 0}};r.default=i},{"./constants":9}],13:[function(t,e,r){"use strict";var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i};var n=function(){window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!a.default.instance&&new a.default};"complete"===document.readyState?n():window.addEventListener("load",n,!1)},{"../core/main":15}],14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("./main"))&&i.__esModule?i:{default:i};a.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},a.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},a.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},a.default.prototype.printMatrix=function(){throw new Error("printMatrix() is not implemented in p5.js, refer to [https://simonsarris.com/a-transformation-class-for-canvas-to-keep-track-of-the-transformation-matrix/] to add your own implementation.")},a.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var n=a.default;r.default=n},{"./main":15}],15:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,t("./shim");var i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("./constants"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function b(t,e,r){var f=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=e,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var i=Object.getOwnPropertyNames(b.prototype._registeredMethods),a=!0,n=!1,o=void 0;try{for(var s,l=i[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var h=s.value;this._registeredMethods[h]=b.prototype._registeredMethods[h].slice()}}catch(t){n=!0,o=t}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){f._userNode&&"string"==typeof f._userNode&&(f._userNode=document.getElementById(f._userNode));var t=(f._isGlobal?window:f).preload;if(t){var e=document.getElementById(f._loadingScreenId);if(!e)(e=document.createElement("div")).innerHTML="Loading...",e.style.position="absolute",e.id=f._loadingScreenId,(f._userNode||document.body).appendChild(e);var r=f._preloadMethods;for(var i in r){r[i]=r[i]||b;var a=r[i];a!==b.prototype&&a!==b||(f._isGlobal&&(window[i]=f._wrapPreload(f,i)),a=f),f._registeredPreloadMethods[i]=a[i],a[i]=f._wrapPreload(a,i)}t(),f._runIfPreloadsAreDone()}else f._setup(),f._draw()},this._runIfPreloadsAreDone=function(){var t=this._isGlobal?window:this;if(0===t._preloadCount){var e=document.getElementById(t._loadingScreenId);e&&e.parentNode.removeChild(e),this._lastFrameTime=window.performance.now(),t._setup(),t._draw()}},this._decrementPreload=function(){var t=this._isGlobal?window:this;"function"==typeof t.preload&&(t._setProperty("_preloadCount",t._preloadCount-1),t._runIfPreloadsAreDone())},this._wrapPreload=function(i,a){var n=this;return function(){n._incrementPreload();for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n._registeredPreloadMethods[a].apply(i,e)}},this._incrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount+1)},this._setup=function(){f.createCanvas(f._defaultCanvasSize.width,f._defaultCanvasSize.height,"p2d");var t=f._isGlobal?window:f;if("function"==typeof t.preload)for(var e in f._preloadMethods)t[e]=f._preloadMethods[e][e],t[e]&&f&&(t[e]=t[e].bind(f));"function"==typeof t.setup&&t.setup();var r=document.getElementsByTagName("canvas"),i=!0,a=!1,n=void 0;try{for(var o,s=r[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;"true"===l.dataset.hidden&&(l.style.visibility="",delete l.dataset.hidden)}}catch(t){a=!0,n=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw n}}f._lastFrameTime=window.performance.now(),f._setupDone=!0},this._draw=function(){var t=window.performance.now(),e=t-f._lastFrameTime,r=1e3/f._targetFrameRate;(!f._loop||r-5<=e)&&(f.redraw(),f._frameRate=1e3/(t-f._lastFrameTime),f.deltaTime=t-f._lastFrameTime,f._setProperty("deltaTime",f.deltaTime),f._lastFrameTime=t,void 0!==f._updateMouseCoords&&(f._updateMouseCoords(),f._setProperty("movedX",0),f._setProperty("movedY",0))),f._loop&&(f._requestAnimId=window.requestAnimationFrame(f._draw))},this._setProperty=function(t,e){f[t]=e,f._isGlobal&&(window[t]=e)},this.remove=function(){var t=document.getElementById(f._loadingScreenId);if(t&&(t.parentNode.removeChild(t),f._incrementPreload()),f._curElement){for(var e in f._loop=!1,f._requestAnimId&&window.cancelAnimationFrame(f._requestAnimId),f._events)window.removeEventListener(e,f._events[e]);var r=!0,i=!1,a=void 0;try{for(var n,o=f._elements[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var s=n.value;for(var l in s.elt&&s.elt.parentNode&&s.elt.parentNode.removeChild(s.elt),s._events)s.elt.removeEventListener(l,s._events[l])}}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var h=f;f._registeredMethods.remove.forEach(function(t){void 0!==t&&t.call(h)})}if(f._isGlobal){for(var u in b.prototype)try{delete window[u]}catch(t){window[u]=void 0}for(var d in f)if(f.hasOwnProperty(d))try{delete window[d]}catch(t){window[d]=void 0}b.instance=null}},this._registeredMethods.init.forEach(function(t){void 0!==t&&t.call(this)},this),this._setupPromisePreloads();var u=this._createFriendlyGlobalFunctionBinder();if(t)t(this);else{for(var d in this._isGlobal=!0,b.instance=this,b.prototype)if("function"==typeof b.prototype[d]){var c=d.substring(2);this._events.hasOwnProperty(c)||(Math.hasOwnProperty(d)&&Math[d]===b.prototype[d]?u(d,b.prototype[d]):u(d,b.prototype[d].bind(this)))}else u(d,b.prototype[d]);for(var p in this)this.hasOwnProperty(p)&&u(p,this[p])}for(var m in this._events){var _=this["_on".concat(m)];if(_){var g=_.bind(this);window.addEventListener(m,g,{passive:!1}),this._events[m]=g}}var v=function(){f._setProperty("focused",!0)},y=function(){f._setProperty("focused",!1)};window.addEventListener("focus",v),window.addEventListener("blur",y),this.registerMethod("remove",function(){window.removeEventListener("focus",v),window.removeEventListener("blur",y)}),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t,e,r;return t=b,(e=[{key:"_initializeInstanceVariables",value:function(){this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=i.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._pixelsDirty=!0,this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,e){b.prototype._preloadMethods.hasOwnProperty(t)||(b.prototype._preloadMethods[t]=e)}},{key:"registerMethod",value:function(t,e){var r=this||b.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(e)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.globalObject||window;t.log||console.log.bind(console);return function(t,e){r[t]=e}}}])&&a(t.prototype,e),r&&a(t,r),b}();for(var o in n.instance=null,n.disableFriendlyErrors=!1,i)n.prototype[o]=i[o];n.prototype._preloadMethods={loadJSON:n.prototype,loadImage:n.prototype,loadStrings:n.prototype,loadXML:n.prototype,loadBytes:n.prototype,loadTable:n.prototype,loadFont:n.prototype,loadModel:n.prototype,loadShader:n.prototype},n.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},n.prototype._registeredPreloadMethods={};var s=n;r.default=s},{"./constants":9,"./shim":26}],16:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("./main"))&&i.__esModule?i:{default:i};a.default.Element=function(t,e){this.elt=t,this._pInst=this._pixelsState=e,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},a.default.Element.prototype.parent=function(t){return void 0===t?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof a.default.Element&&(t=t.elt),t.appendChild(this.elt),this)},a.default.Element.prototype.id=function(t){return void 0===t?this.elt.id:(this.elt.id=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},a.default.Element.prototype.class=function(t){return void 0===t?this.elt.className:(this.elt.className=t,this)},a.default.Element.prototype.mousePressed=function(e){return a.default.Element._adjustListener("mousedown",function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this)},this),this},a.default.Element.prototype.doubleClicked=function(t){return a.default.Element._adjustListener("dblclick",t,this),this},a.default.Element.prototype.mouseWheel=function(t){return a.default.Element._adjustListener("wheel",t,this),this},a.default.Element.prototype.mouseReleased=function(t){return a.default.Element._adjustListener("mouseup",t,this),this},a.default.Element.prototype.mouseClicked=function(t){return a.default.Element._adjustListener("click",t,this),this},a.default.Element.prototype.mouseMoved=function(t){return a.default.Element._adjustListener("mousemove",t,this),this},a.default.Element.prototype.mouseOver=function(t){return a.default.Element._adjustListener("mouseover",t,this),this},a.default.Element.prototype.mouseOut=function(t){return a.default.Element._adjustListener("mouseout",t,this),this},a.default.Element.prototype.touchStarted=function(t){return a.default.Element._adjustListener("touchstart",t,this),this},a.default.Element.prototype.touchMoved=function(t){return a.default.Element._adjustListener("touchmove",t,this),this},a.default.Element.prototype.touchEnded=function(t){return a.default.Element._adjustListener("touchend",t,this),this},a.default.Element.prototype.dragOver=function(t){return a.default.Element._adjustListener("dragover",t,this),this},a.default.Element.prototype.dragLeave=function(t){return a.default.Element._adjustListener("dragleave",t,this),this},a.default.Element._adjustListener=function(t,e,r){return!1===e?a.default.Element._detachListener(t,r):a.default.Element._attachListener(t,e,r),this},a.default.Element._attachListener=function(t,e,r){r._events[t]&&a.default.Element._detachListener(t,r);var i=e.bind(r);r.elt.addEventListener(t,i,!1),r._events[t]=i},a.default.Element._detachListener=function(t,e){var r=e._events[t];e.elt.removeEventListener(t,r,!1),e._events[t]=null},a.default.Element.prototype._setProperty=function(t,e){this[t]=e};var n=a.default.Element;r.default=n},{"./main":15}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,s=(i=t("./main"))&&i.__esModule?i:{default:i},l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("./constants"));s.default.Graphics=function(t,e,r,i){var a=r||l.P2D;this.canvas=document.createElement("canvas");var n=i._userNode||document.body;for(var o in n.appendChild(this.canvas),s.default.Element.call(this,this.canvas,i),s.default.prototype)this[o]||("function"==typeof s.default.prototype[o]?this[o]=s.default.prototype[o].bind(this):this[o]=s.default.prototype[o]);return s.default.prototype._initializeInstanceVariables.apply(this),this.width=t,this.height=e,this._pixelDensity=i._pixelDensity,a===l.WEBGL?this._renderer=new s.default.RendererGL(this.canvas,this,!1):this._renderer=new s.default.Renderer2D(this.canvas,this,!1),i._elements.push(this),this._renderer.resize(t,e),this._renderer._applyDefaults(),this},s.default.Graphics.prototype=Object.create(s.default.Element.prototype),s.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},s.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var t=this._pInst._elements.indexOf(this);for(var e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e])};var a=s.default.Graphics;r.default=a},{"./constants":9,"./main":15}],18:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,l=(i=t("./main"))&&i.__esModule?i:{default:i},v=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants"));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){var e=0,r=0;if(t.offsetParent)for(;e+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;);else e+=t.offsetLeft,r+=t.offsetTop;return[e,r]}l.default.Renderer=function(t,e,r){l.default.Element.call(this,t,e),this.canvas=t,this._pixelsState=e,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=v.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=v.LEFT,this._textBaseline=v.BASELINE,this._rectMode=v.CORNER,this._ellipseMode=v.CENTER,this._curveTightness=0,this._imageMode=v.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1},l.default.Renderer.prototype=Object.create(l.default.Element.prototype),l.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle}}},l.default.Renderer.prototype.pop=function(t){t.properties&&Object.assign(this,t.properties)},l.default.Renderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=e*this._pInst._pixelDensity,this.elt.style.width="".concat(t,"px"),this.elt.style.height="".concat(e,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},l.default.Renderer.prototype.get=function(t,e,r,i){var a=this._pixelsState,n=a._pixelDensity,o=this.canvas;if(void 0===t&&void 0===e)t=e=0,r=a.width,i=a.height;else if(t*=n,e*=n,void 0===r&&void 0===i)return t<0||e<0||t>=o.width||e>=o.height?[0,0,0,0]:this._getPixel(t,e);var s=new l.default.Image(r,i);return s.canvas.getContext("2d").drawImage(o,t,e,r*n,i*n,0,0,r,i),s},l.default.Renderer.prototype.textLeading=function(t){return"number"==typeof t?(this._setProperty("_textLeading",t),this._pInst):this._textLeading},l.default.Renderer.prototype.textSize=function(t){return"number"==typeof t?(this._setProperty("_textSize",t),this._setProperty("_textLeading",t*v._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer.prototype.textStyle=function(t){return t?(t!==v.NORMAL&&t!==v.ITALIC&&t!==v.BOLD&&t!==v.BOLDITALIC||this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle},l.default.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},l.default.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},l.default.Renderer.prototype.textAlign=function(t,e){return void 0!==t?(this._setProperty("_textAlign",t),void 0!==e&&this._setProperty("_textBaseline",e),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},l.default.Renderer.prototype.text=function(t,e,r,i,a){var n,o,s,l,h,u,d,f,c=this._pInst,p=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&void 0!==t){if("string"!=typeof t&&(t=t.toString()),n=(t=t.replace(/(\t)/g,"  ")).split("\n"),void 0!==i){for(s=f=0;s<n.length;s++)for(h="",d=n[s].split(" "),o=0;o<d.length;o++)u="".concat(h+d[o]," "),i<this.textWidth(u)?(h="".concat(d[o]," "),f+=c.textLeading()):h=u;switch(this._rectMode===v.CENTER&&(e-=i/2,r-=a/2),this._textAlign){case v.CENTER:e+=i/2;break;case v.RIGHT:e+=i}var m=!1;if(void 0!==a){switch(this._textBaseline){case v.BOTTOM:r+=a-f;break;case v.CENTER:r+=(a-f)/2;break;case v.BASELINE:m=!0,this._textBaseline=v.TOP}p=r+a-c.textAscent()}for(s=0;s<n.length;s++){for(h="",d=n[s].split(" "),o=0;o<d.length;o++)u="".concat(h+d[o]," "),i<this.textWidth(u)&&0<h.length?(this._renderText(c,h,e,r,p),h="".concat(d[o]," "),r+=c.textLeading()):h=u;this._renderText(c,h,e,r,p),r+=c.textLeading(),m&&(this._textBaseline=v.BASELINE)}}else{var _=0,g=c.textAlign().vertical;for(g===v.CENTER?_=(n.length-1)*c.textLeading()/2:g===v.BOTTOM&&(_=(n.length-1)*c.textLeading()),l=0;l<n.length;l++)this._renderText(c,n[l],e,r-_,p),r+=c.textLeading()}return c}},l.default.Renderer.prototype._applyDefaults=function(){return this},l.default.Renderer.prototype._isOpenType=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===a(t)&&t.font&&t.font.supported},l.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize="".concat(this._textSize,"px"),t.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block",e.style.width="1px",e.style.height="0px";var r=document.createElement("div");r.appendChild(t),r.appendChild(e),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),e.style.verticalAlign="baseline";var i=s(e),a=s(t),n=i[1]-a[1];e.style.verticalAlign="bottom",i=s(e),a=s(t);var o=i[1]-a[1]-n;return document.body.removeChild(r),this._setProperty("_textAscent",n),this._setProperty("_textDescent",o),this};var n=l.default.Renderer;r.default=n},{"../core/constants":9,"./main":15}],19:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=i(t("./main")),p=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("./constants")),f=i(t("../image/filters"));function i(t){return t&&t.__esModule?t:{default:t}}t("./p5.Renderer");var _="rgba(0,0,0,0)";d.default.Renderer2D=function(t,e,r){return d.default.Renderer.call(this,t,e,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},d.default.Renderer2D.prototype=Object.create(d.default.Renderer.prototype),d.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=p.BLEND,this._setFill(p._DEFAULT_FILL),this._setStroke(p._DEFAULT_STROKE),this.drawingContext.lineCap=p.ROUND,this.drawingContext.font="normal 12px sans-serif"},d.default.Renderer2D.prototype.resize=function(t,e){d.default.Renderer.prototype.resize.call(this,t,e),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},d.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof d.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var t,e=this._getFill(),r=(t=this._pInst).color.apply(t,arguments).toString();this._setFill(r),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(e),this._isErasing&&this._pInst.erase()}this.drawingContext.restore(),this._pixelsState._pixelsDirty=!0},d.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore(),this._pixelsState._pixelsDirty=!0},d.default.Renderer2D.prototype.fill=function(){var t,e=(t=this._pInst).color.apply(t,arguments);this._setFill(e.toString())},d.default.Renderer2D.prototype.stroke=function(){var t,e=(t=this._pInst).color.apply(t,arguments);this._setStroke(e.toString())},d.default.Renderer2D.prototype.erase=function(t,e){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var r=this._pInst.color(255,t).toString();this.drawingContext.fillStyle=r,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var i=this._pInst.color(255,e).toString();this.drawingContext.strokeStyle=i;var a=this._cachedBlendMode;this.blendMode(p.REMOVE),this._cachedBlendMode=a,this._isErasing=!0}},d.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},d.default.Renderer2D.prototype.image=function(t,e,r,i,a,n,o,s,l){var h;t.gifProperties&&t._animateGif(this._pInst);try{this._tint&&(d.default.MediaElement&&t instanceof d.default.MediaElement&&t.loadPixels(),t.canvas&&(h=this._getTintedImageCanvas(t))),h||(h=t.canvas||t.elt);var u=1;t.width&&0<t.width&&(u=h.width/t.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(h,u*e,u*r,u*i,u*a,n,o,s,l),this._isErasing&&this._pInst.erase()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t}this._pixelsState._pixelsDirty=!0},d.default.Renderer2D.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=f.default._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var i=r.getContext("2d"),a=i.createImageData(t.canvas.width,t.canvas.height),n=a.data,o=0;o<e.length;o+=4){var s=e[o],l=e[o+1],h=e[o+2],u=e[o+3];n[o]=s*this._tint[0]/255,n[o+1]=l*this._tint[1]/255,n[o+2]=h*this._tint[2]/255,n[o+3]=u*this._tint[3]/255}return i.putImageData(a,0,0),r},d.default.Renderer2D.prototype.blendMode=function(t){if(t===p.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(t!==p.BLEND&&t!==p.REMOVE&&t!==p.DARKEST&&t!==p.LIGHTEST&&t!==p.DIFFERENCE&&t!==p.MULTIPLY&&t!==p.EXCLUSION&&t!==p.SCREEN&&t!==p.REPLACE&&t!==p.OVERLAY&&t!==p.HARD_LIGHT&&t!==p.SOFT_LIGHT&&t!==p.DODGE&&t!==p.BURN&&t!==p.ADD)throw new Error("Mode ".concat(t," not recognized."));this._cachedBlendMode=t,this.drawingContext.globalCompositeOperation=t}},d.default.Renderer2D.prototype.blend=function(){for(var t=this.drawingContext.globalCompositeOperation,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a=r[r.length-1],n=Array.prototype.slice.call(r,0,r.length-1);this.drawingContext.globalCompositeOperation=a,d.default.prototype.copy.apply(this,n),this.drawingContext.globalCompositeOperation=t},d.default.Renderer2D.prototype._getPixel=function(t,e){var r,i,a=this._pixelsState;return i=a._pixelsDirty?(r=this.drawingContext.getImageData(t,e,1,1).data,0):(r=a.pixels,4*(Math.floor(t)+Math.floor(e)*this.canvas.width)),[r[i+0],r[i+1],r[i+2],r[i+3]]},d.default.Renderer2D.prototype.loadPixels=function(){var t=this._pixelsState;if(t._pixelsDirty){t._pixelsDirty=!1;var e=t._pixelDensity,r=this.width*e,i=this.height*e,a=this.drawingContext.getImageData(0,0,r,i);t._setProperty("imageData",a),t._setProperty("pixels",a.data)}},d.default.Renderer2D.prototype.set=function(t,e,r){t=Math.floor(t),e=Math.floor(e);var i=this._pixelsState;if(r instanceof d.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(i._pixelDensity,i._pixelDensity),this.drawingContext.drawImage(r.canvas,t,e),this.drawingContext.restore(),i._pixelsDirty=!0;else{var a=0,n=0,o=0,s=0,l=4*(e*i._pixelDensity*(this.width*i._pixelDensity)+t*i._pixelDensity);if(i.imageData&&!i._pixelsDirty||i.loadPixels.call(i),"number"==typeof r)l<i.pixels.length&&(o=n=a=r,s=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<i.pixels.length&&(a=r[0],n=r[1],o=r[2],s=r[3])}else r instanceof d.default.Color&&l<i.pixels.length&&(a=r.levels[0],n=r.levels[1],o=r.levels[2],s=r.levels[3]);for(var h=0;h<i._pixelDensity;h++)for(var u=0;u<i._pixelDensity;u++)l=4*((e*i._pixelDensity+u)*this.width*i._pixelDensity+(t*i._pixelDensity+h)),i.pixels[l]=a,i.pixels[l+1]=n,i.pixels[l+2]=o,i.pixels[l+3]=s}},d.default.Renderer2D.prototype.updatePixels=function(t,e,r,i){var a=this._pixelsState,n=a._pixelDensity;void 0===t&&void 0===e&&void 0===r&&void 0===i&&(e=t=0,r=this.width,i=this.height),t*=n,e*=n,r*=n,i*=n,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex]=a.imageData),this.drawingContext.putImageData(a.imageData,t,e,0,0,r,i),0===t&&0===e&&r===this.width&&i===this.height||(a._pixelsDirty=!0)},d.default.Renderer2D.prototype._acuteArcToBezier=function(t,e){var r=e/2,i=Math.cos(r),a=Math.sin(r),n=1/Math.tan(r),o=t+r,s=Math.cos(o),l=Math.sin(o),h=(4-i)/3,u=a+(i-h)*n;return{ax:Math.cos(t).toFixed(7),ay:Math.sin(t).toFixed(7),bx:(h*s+u*l).toFixed(7),by:(h*l-u*s).toFixed(7),cx:(h*s-u*l).toFixed(7),cy:(h*l+u*s).toFixed(7),dx:Math.cos(t+e).toFixed(7),dy:Math.sin(t+e).toFixed(7)}},d.default.Renderer2D.prototype.arc=function(r,i,t,e,a,n,o){var s=this.drawingContext,l=t/2,h=e/2,u=0,d=[];for(r+=l,i+=h;1e-5<=n-a;)u=Math.min(n-a,p.HALF_PI),d.push(this._acuteArcToBezier(a,u)),a+=u;return this._doFill&&(s.beginPath(),d.forEach(function(t,e){0===e&&s.moveTo(r+t.ax*l,i+t.ay*h),s.bezierCurveTo(r+t.bx*l,i+t.by*h,r+t.cx*l,i+t.cy*h,r+t.dx*l,i+t.dy*h)}),o!==p.PIE&&null!=o||s.lineTo(r,i),s.closePath(),s.fill(),this._pixelsState._pixelsDirty=!0),this._doStroke&&(s.beginPath(),d.forEach(function(t,e){0===e&&s.moveTo(r+t.ax*l,i+t.ay*h),s.bezierCurveTo(r+t.bx*l,i+t.by*h,r+t.cx*l,i+t.cy*h,r+t.dx*l,i+t.dy*h)}),o===p.PIE?(s.lineTo(r,i),s.closePath()):o===p.CHORD&&s.closePath(),s.stroke(),this._pixelsState._pixelsDirty=!0),this},d.default.Renderer2D.prototype.ellipse=function(t){var e=this.drawingContext,r=this._doFill,i=this._doStroke,a=parseFloat(t[0]),n=parseFloat(t[1]),o=parseFloat(t[2]),s=parseFloat(t[3]);if(r&&!i){if(this._getFill()===_)return this}else if(!r&&i&&this._getStroke()===_)return this;var l=.5522847498,h=o/2*l,u=s/2*l,d=a+o,f=n+s,c=a+o/2,p=n+s/2;e.beginPath(),e.moveTo(a,p),e.bezierCurveTo(a,p-u,c-h,n,c,n),e.bezierCurveTo(c+h,n,d,p-u,d,p),e.bezierCurveTo(d,p+u,c+h,f,c,f),e.bezierCurveTo(c-h,f,a,p+u,a,p),e.closePath(),r&&(e.fill(),this._pixelsState._pixelsDirty=!0),i&&(e.stroke(),this._pixelsState._pixelsDirty=!0)},d.default.Renderer2D.prototype.line=function(t,e,r,i){var a=this.drawingContext;return this._doStroke&&(this._getStroke()===_||(a.beginPath(),a.moveTo(t,e),a.lineTo(r,i),a.stroke(),this._pixelsState._pixelsDirty=!0)),this},d.default.Renderer2D.prototype.point=function(t,e){var r=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===_)return this;var i=this._getStroke(),a=this._getFill();t=Math.round(t),e=Math.round(e),this._setFill(i),1<r.lineWidth?(r.beginPath(),r.arc(t,e,r.lineWidth/2,0,p.TWO_PI,!1),r.fill()):r.fillRect(t,e,1,1),this._setFill(a),this._pixelsState._pixelsDirty=!0},d.default.Renderer2D.prototype.quad=function(t,e,r,i,a,n,o,s){var l=this.drawingContext,h=this._doFill,u=this._doStroke;if(h&&!u){if(this._getFill()===_)return this}else if(!h&&u&&this._getStroke()===_)return this;return l.beginPath(),l.moveTo(t,e),l.lineTo(r,i),l.lineTo(a,n),l.lineTo(o,s),l.closePath(),h&&l.fill(),u&&l.stroke(),this._pixelsState._pixelsDirty=!0,this},d.default.Renderer2D.prototype.rect=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],n=t[4],o=t[5],s=t[6],l=t[7],h=this.drawingContext,u=this._doFill,d=this._doStroke;if(u&&!d){if(this._getFill()===_)return this}else if(!u&&d&&this._getStroke()===_)return this;if(h.beginPath(),void 0===n)h.rect(e,r,i,a);else{void 0===o&&(o=n),void 0===s&&(s=o),void 0===l&&(l=s);var f=Math.abs(i),c=Math.abs(a),p=f/2,m=c/2;f<2*n&&(n=p),c<2*n&&(n=m),f<2*o&&(o=p),c<2*o&&(o=m),f<2*s&&(s=p),c<2*s&&(s=m),f<2*l&&(l=p),c<2*l&&(l=m),h.beginPath(),h.moveTo(e+n,r),h.arcTo(e+i,r,e+i,r+a,o),h.arcTo(e+i,r+a,e,r+a,s),h.arcTo(e,r+a,e,r,l),h.arcTo(e,r,e+i,r,n),h.closePath()}return this._doFill&&h.fill(),this._doStroke&&h.stroke(),this._pixelsState._pixelsDirty=!0,this},d.default.Renderer2D.prototype.triangle=function(t){var e=this.drawingContext,r=this._doFill,i=this._doStroke,a=t[0],n=t[1],o=t[2],s=t[3],l=t[4],h=t[5];if(r&&!i){if(this._getFill()===_)return this}else if(!r&&i&&this._getStroke()===_)return this;e.beginPath(),e.moveTo(a,n),e.lineTo(o,s),e.lineTo(l,h),e.closePath(),r&&(e.fill(),this._pixelsState._pixelsDirty=!0),i&&(e.stroke(),this._pixelsState._pixelsDirty=!0)},d.default.Renderer2D.prototype.endShape=function(t,e,r,i,a,n,o){if(0===e.length)return this;if(!this._doStroke&&!this._doFill)return this;var s,l,h,u=t===p.CLOSE;u&&!n&&e.push(e[0]);var d=e.length;if(!r||o!==p.POLYGON&&null!==o)if(!i||o!==p.POLYGON&&null!==o)if(!a||o!==p.POLYGON&&null!==o)if(o===p.POINTS)for(l=0;l<d;l++)s=e[l],this._doStroke&&this._pInst.stroke(s[6]),this._pInst.point(s[0],s[1]);else if(o===p.LINES)for(l=0;l+1<d;l+=2)s=e[l],this._doStroke&&this._pInst.stroke(e[l+1][6]),this._pInst.line(s[0],s[1],e[l+1][0],e[l+1][1]);else if(o===p.TRIANGLES)for(l=0;l+2<d;l+=3)s=e[l],this.drawingContext.beginPath(),this.drawingContext.moveTo(s[0],s[1]),this.drawingContext.lineTo(e[l+1][0],e[l+1][1]),this.drawingContext.lineTo(e[l+2][0],e[l+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(e[l+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(e[l+2][6]),this.drawingContext.stroke());else if(o===p.TRIANGLE_STRIP)for(l=0;l+1<d;l++)s=e[l],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[l+1][0],e[l+1][1]),this.drawingContext.lineTo(s[0],s[1]),this._doStroke&&this._pInst.stroke(e[l+1][6]),this._doFill&&this._pInst.fill(e[l+1][5]),l+2<d&&(this.drawingContext.lineTo(e[l+2][0],e[l+2][1]),this._doStroke&&this._pInst.stroke(e[l+2][6]),this._doFill&&this._pInst.fill(e[l+2][5])),this._doFillStrokeClose(u);else if(o===p.TRIANGLE_FAN){if(2<d){for(this.drawingContext.beginPath(),l=2;l<d;l++)s=e[l],this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[l-1][0],e[l-1][1]),this.drawingContext.lineTo(s[0],s[1]),this.drawingContext.lineTo(e[0][0],e[0][1]),l<d-1&&(this._doFill&&s[5]!==e[l+1][5]||this._doStroke&&s[6]!==e[l+1][6])&&(this._doFill&&(this._pInst.fill(s[5]),this.drawingContext.fill(),this._pInst.fill(e[l+1][5])),this._doStroke&&(this._pInst.stroke(s[6]),this.drawingContext.stroke(),this._pInst.stroke(e[l+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(u)}}else if(o===p.QUADS)for(l=0;l+3<d;l+=4){for(s=e[l],this.drawingContext.beginPath(),this.drawingContext.moveTo(s[0],s[1]),h=1;h<4;h++)this.drawingContext.lineTo(e[l+h][0],e[l+h][1]);this.drawingContext.lineTo(s[0],s[1]),this._doFill&&this._pInst.fill(e[l+3][5]),this._doStroke&&this._pInst.stroke(e[l+3][6]),this._doFillStrokeClose(u)}else if(o===p.QUAD_STRIP){if(3<d)for(l=0;l+1<d;l+=2)s=e[l],this.drawingContext.beginPath(),l+3<d?(this.drawingContext.moveTo(e[l+2][0],e[l+2][1]),this.drawingContext.lineTo(s[0],s[1]),this.drawingContext.lineTo(e[l+1][0],e[l+1][1]),this.drawingContext.lineTo(e[l+3][0],e[l+3][1]),this._doFill&&this._pInst.fill(e[l+3][5]),this._doStroke&&this._pInst.stroke(e[l+3][6])):(this.drawingContext.moveTo(s[0],s[1]),this.drawingContext.lineTo(e[l+1][0],e[l+1][1])),this._doFillStrokeClose(u)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),l=1;l<d;l++)(s=e[l]).isVert&&(s.moveTo?this.drawingContext.moveTo(s[0],s[1]):this.drawingContext.lineTo(s[0],s[1]));this._doFillStrokeClose(u)}else{for(this.drawingContext.beginPath(),l=0;l<d;l++)e[l].isVert?e[l].moveTo?this.drawingContext.moveTo(e[l][0],e[l][1]):this.drawingContext.lineTo(e[l][0],e[l][1]):this.drawingContext.quadraticCurveTo(e[l][0],e[l][1],e[l][2],e[l][3]);this._doFillStrokeClose(u)}else{for(this.drawingContext.beginPath(),l=0;l<d;l++)e[l].isVert?e[l].moveTo?this.drawingContext.moveTo(e[l][0],e[l][1]):this.drawingContext.lineTo(e[l][0],e[l][1]):this.drawingContext.bezierCurveTo(e[l][0],e[l][1],e[l][2],e[l][3],e[l][4],e[l][5]);this._doFillStrokeClose(u)}else if(3<d){var f=[],c=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[1][0],e[1][1]),l=1;l+2<d;l++)s=e[l],f[0]=[s[0],s[1]],f[1]=[s[0]+(c*e[l+1][0]-c*e[l-1][0])/6,s[1]+(c*e[l+1][1]-c*e[l-1][1])/6],f[2]=[e[l+1][0]+(c*e[l][0]-c*e[l+2][0])/6,e[l+1][1]+(c*e[l][1]-c*e[l+2][1])/6],f[3]=[e[l+1][0],e[l+1][1]],this.drawingContext.bezierCurveTo(f[1][0],f[1][1],f[2][0],f[2][1],f[3][0],f[3][1]);u&&this.drawingContext.lineTo(e[l+1][0],e[l+1][1]),this._doFillStrokeClose(u)}return n=a=i=r=!1,u&&e.pop(),this._pixelsState._pixelsDirty=!0,this},d.default.Renderer2D.prototype.strokeCap=function(t){return t!==p.ROUND&&t!==p.SQUARE&&t!==p.PROJECT||(this.drawingContext.lineCap=t),this},d.default.Renderer2D.prototype.strokeJoin=function(t){return t!==p.ROUND&&t!==p.BEVEL&&t!==p.MITER||(this.drawingContext.lineJoin=t),this},d.default.Renderer2D.prototype.strokeWeight=function(t){return this.drawingContext.lineWidth=void 0===t||0===t?1e-4:t,this},d.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},d.default.Renderer2D.prototype._setFill=function(t){t!==this._cachedFillStyle&&(this.drawingContext.fillStyle=t,this._cachedFillStyle=t)},d.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},d.default.Renderer2D.prototype._setStroke=function(t){t!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=t,this._cachedStrokeStyle=t)},d.default.Renderer2D.prototype.bezier=function(t,e,r,i,a,n,o,s){return this._pInst.beginShape(),this._pInst.vertex(t,e),this._pInst.bezierVertex(r,i,a,n,o,s),this._pInst.endShape(),this},d.default.Renderer2D.prototype.curve=function(t,e,r,i,a,n,o,s){return this._pInst.beginShape(),this._pInst.curveVertex(t,e),this._pInst.curveVertex(r,i),this._pInst.curveVertex(a,n),this._pInst.curveVertex(o,s),this._pInst.endShape(),this},d.default.Renderer2D.prototype._doFillStrokeClose=function(t){t&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this._pixelsState._pixelsDirty=!0},d.default.Renderer2D.prototype.applyMatrix=function(t,e,r,i,a,n){this.drawingContext.transform(t,e,r,i,a,n)},d.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},d.default.Renderer2D.prototype.rotate=function(t){this.drawingContext.rotate(t)},d.default.Renderer2D.prototype.scale=function(t,e){return this.drawingContext.scale(t,e),this},d.default.Renderer2D.prototype.translate=function(t,e){return t instanceof d.default.Vector&&(e=t.y,t=t.x),this.drawingContext.translate(t,e),this},d.default.Renderer2D.prototype.text=function(t,e,r,i,a){var n;void 0!==i&&this.drawingContext.textBaseline===p.BASELINE&&(n=!0,this.drawingContext.textBaseline=p.TOP);var o=d.default.Renderer.prototype.text.apply(this,arguments);return n&&(this.drawingContext.textBaseline=p.BASELINE),o},d.default.Renderer2D.prototype._renderText=function(t,e,r,i,a){if(!(a<=i))return t.push(),this._isOpenType()?this._textFont._renderPath(e,r,i,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(e,r,i),this._doFill&&(this._fillSet||this._setFill(p._DEFAULT_TEXT_FILL),this.drawingContext.fillText(e,r,i))),t.pop(),this._pixelsState._pixelsDirty=!0,t},d.default.Renderer2D.prototype.textWidth=function(t){return this._isOpenType()?this._textFont._textWidth(t,this._textSize):this.drawingContext.measureText(t).width},d.default.Renderer2D.prototype._applyTextProperties=function(){var t,e=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(t||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===p.CENTER?this.drawingContext.textBaseline=p._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,e},d.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),d.default.Renderer.prototype.push.apply(this)},d.default.Renderer2D.prototype.pop=function(t){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d.default.Renderer.prototype.pop.call(this,t)};var a=d.default.Renderer2D;r.default=a},{"../image/filters":29,"./constants":9,"./main":15,"./p5.Renderer":18}],20:[function(t,e,r){"use strict";var i,f=(i=t("./main"))&&i.__esModule?i:{default:i};f.default.prototype._promisePreloads=[];var c=!(f.default.prototype.registerPromisePreload=function(t){f.default.prototype._promisePreloads.push(t)});f.default.prototype._setupPromisePreloads=function(){var t=!0,e=!1,r=void 0;try{for(var i,a=this._promisePreloads[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var n=i.value,o=this,s=n.method,l=n.addCallbacks,h=n.legacyPreloadSetup,u=n.target||this,d=u[s].bind(u);if(u===f.default.prototype){if(c)continue;o=null,d=u[s]}if(u[s]=this._wrapPromisePreload(o,d,l),h)u[h.method]=this._legacyPreloadGenerator(o,h,u[s])}}catch(t){e=!0,r=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw r}}c=!0},f.default.prototype._wrapPromisePreload=function(t,l,h){var e=function(){var t=this;this._incrementPreload();for(var e=null,r=null,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];if(h)for(var o=a.length-1;0<=o&&!r&&"function"==typeof a[o];o--)r=e,e=a.pop();var s=Promise.resolve(l.apply(this,a));return e&&s.then(e),r&&s.catch(r),s.then(function(){return t._decrementPreload()}),s};return t&&(e=e.bind(t)),e};var n=function(){return{}};f.default.prototype._legacyPreloadGenerator=function(t,e,i){var a=e.createBaseObject||n,r=function(){var e=this;this._incrementPreload();var r=a.apply(this,arguments);return i.apply(this,arguments).then(function(t){Object.assign(r,t),e._decrementPreload()}),r};return t&&(r=r.bind(t)),r}},{"./main":15}],21:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,s=(i=t("./main"))&&i.__esModule?i:{default:i},l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("./constants"));function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var u="defaultCanvas0",d="p5Canvas";s.default.prototype.createCanvas=function(t,e,r){s.default._validateParameters("createCanvas",arguments);var i,a=r||l.P2D;if(a===l.WEBGL){if(i=document.getElementById(u)){i.parentNode.removeChild(i);var n=this._renderer;this._elements=this._elements.filter(function(t){return t!==n})}(i=document.createElement("canvas")).id=u,i.classList.add(d)}else if(this._defaultGraphicsCreated)i=this.canvas;else{i=document.createElement("canvas");for(var o=0;document.getElementById("defaultCanvas".concat(o));)o++;u="defaultCanvas".concat(o),i.id=u,i.classList.add(d)}return this._setupDone||(i.dataset.hidden=!0,i.style.visibility="hidden"),this._userNode?this._userNode.appendChild(i):document.body.appendChild(i),a===l.WEBGL?(this._setProperty("_renderer",new s.default.RendererGL(i,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new s.default.Renderer2D(i,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(t,e),this._renderer._applyDefaults(),this._renderer},s.default.prototype.resizeCanvas=function(t,e,r){if(s.default._validateParameters("resizeCanvas",arguments),this._renderer){var i={};for(var a in this.drawingContext){var n=this.drawingContext[a];"object"!==h(n)&&"function"!=typeof n&&(i[a]=n)}for(var o in this._renderer.resize(t,e),this.width=t,this.height=e,i)try{this.drawingContext[o]=i[o]}catch(t){}r||this.redraw()}},s.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},s.default.prototype.createGraphics=function(t,e,r){return s.default._validateParameters("createGraphics",arguments),new s.default.Graphics(t,e,r,this)},s.default.prototype.blendMode=function(t){s.default._validateParameters("blendMode",arguments),t===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),t=l.BLEND),this._renderer.blendMode(t)};var a=s.default;r.default=a},{"../webgl/p5.RendererGL":42,"./constants":9,"./main":15,"./p5.Graphics":17,"./p5.Renderer2D":19}],22:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=i(t("../main")),o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../constants")),d=i(t("../helpers"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../error_helpers"),u.default.prototype._normalizeArcAngles=function(t,e,r,i,a){var n;return t-=o.TWO_PI*Math.floor(t/o.TWO_PI),e-=o.TWO_PI*Math.floor(e/o.TWO_PI),n=Math.min(Math.abs(t-e),o.TWO_PI-Math.abs(t-e)),a&&(t=t<=o.HALF_PI?Math.atan(r/i*Math.tan(t)):t>o.HALF_PI&&t<=3*o.HALF_PI?Math.atan(r/i*Math.tan(t))+o.PI:Math.atan(r/i*Math.tan(t))+o.TWO_PI,e=e<=o.HALF_PI?Math.atan(r/i*Math.tan(e)):e>o.HALF_PI&&e<=3*o.HALF_PI?Math.atan(r/i*Math.tan(e))+o.PI:Math.atan(r/i*Math.tan(e))+o.TWO_PI),e<t&&(e+=o.TWO_PI),{start:t,stop:e,correspondToSamePoint:n<1e-5}},u.default.prototype.arc=function(t,e,r,i,a,n,o,s){if(u.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;a=this._toRadians(a),n=this._toRadians(n),r=Math.abs(r),i=Math.abs(i);var l=d.default.modeAdjust(t,e,r,i,this._renderer._ellipseMode),h=this._normalizeArcAngles(a,n,l.w,l.h,!0);return h.correspondToSamePoint?this._renderer.ellipse([l.x,l.y,l.w,l.h,s]):this._renderer.arc(l.x,l.y,l.w,l.h,h.start,h.stop,o,s),this},u.default.prototype.ellipse=function(t,e,r,i,a){if(u.default._validateParameters("ellipse",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;r<0&&(r=Math.abs(r)),void 0===i?i=r:i<0&&(i=Math.abs(i));var n=d.default.modeAdjust(t,e,r,i,this._renderer._ellipseMode);return this._renderer.ellipse([n.x,n.y,n.w,n.h,a]),this},u.default.prototype.circle=function(){var t=Array.prototype.slice.call(arguments,0,2);return t.push(arguments[2]),t.push(arguments[2]),this.ellipse.apply(this,a(t))},u.default.prototype.line=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;(u.default._validateParameters("line",e),this._renderer._doStroke)&&(i=this._renderer).line.apply(i,e);return this},u.default.prototype.point=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;(u.default._validateParameters("point",e),this._renderer._doStroke)&&(i=this._renderer).point.apply(i,e);return this},u.default.prototype.quad=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;(u.default._validateParameters("quad",e),this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&12!==e.length?this._renderer.quad.call(this._renderer,e[0],e[1],0,e[2],e[3],0,e[4],e[5],0,e[6],e[7],0):(i=this._renderer).quad.apply(i,e));return this},u.default.prototype.rect=function(){if(u.default._validateParameters("rect",arguments),this._renderer._doStroke||this._renderer._doFill){for(var t=d.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),e=[t.x,t.y,t.w,t.h],r=4;r<arguments.length;r++)e[r]=arguments[r];this._renderer.rect(e)}return this},u.default.prototype.square=function(t,e,r,i,a,n,o){return this.rect(t,e,r,r,i,a,n,o)},u.default.prototype.triangle=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.default._validateParameters("triangle",e),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(e),this};var n=u.default;r.default=n},{"../constants":9,"../error_helpers":11,"../helpers":12,"../main":15}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../main"))&&i.__esModule?i:{default:i},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../constants"));a.default.prototype.ellipseMode=function(t){return a.default._validateParameters("ellipseMode",arguments),t!==n.CORNER&&t!==n.CORNERS&&t!==n.RADIUS&&t!==n.CENTER||(this._renderer._ellipseMode=t),this},a.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(t){return a.default._validateParameters("rectMode",arguments),t!==n.CORNER&&t!==n.CORNERS&&t!==n.RADIUS&&t!==n.CENTER||(this._renderer._rectMode=t),this},a.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(t){return a.default._validateParameters("strokeCap",arguments),t!==n.ROUND&&t!==n.SQUARE&&t!==n.PROJECT||this._renderer.strokeCap(t),this},a.default.prototype.strokeJoin=function(t){return a.default._validateParameters("strokeJoin",arguments),t!==n.ROUND&&t!==n.BEVEL&&t!==n.MITER||this._renderer.strokeJoin(t),this},a.default.prototype.strokeWeight=function(t){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(t),this};var o=a.default;r.default=o},{"../constants":9,"../main":15}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,s=(i=t("../main"))&&i.__esModule?i:{default:i};t("../error_helpers"),s.default.prototype.bezier=function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return s.default._validateParameters("bezier",r),(this._renderer._doStroke||this._renderer._doFill)&&(t=this._renderer).bezier.apply(t,r),this},s.default.prototype.bezierDetail=function(t){return s.default._validateParameters("bezierDetail",arguments),this._bezierDetail=t,this},s.default.prototype.bezierPoint=function(t,e,r,i,a){s.default._validateParameters("bezierPoint",arguments);var n=1-a;return Math.pow(n,3)*t+3*Math.pow(n,2)*a*e+3*n*Math.pow(a,2)*r+Math.pow(a,3)*i},s.default.prototype.bezierTangent=function(t,e,r,i,a){s.default._validateParameters("bezierTangent",arguments);var n=1-a;return 3*i*Math.pow(a,2)-3*r*Math.pow(a,2)+6*r*n*a-6*e*n*a+3*e*Math.pow(n,2)-3*t*Math.pow(n,2)},s.default.prototype.curve=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;(s.default._validateParameters("curve",e),this._renderer._doStroke)&&(i=this._renderer).curve.apply(i,e);return this},s.default.prototype.curveDetail=function(t){return s.default._validateParameters("curveDetail",arguments),this._curveDetail=t<3?3:t,this},s.default.prototype.curveTightness=function(t){return s.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=t,this},s.default.prototype.curvePoint=function(t,e,r,i,a){s.default._validateParameters("curvePoint",arguments);var n=a*a*a,o=a*a;return t*(-.5*n+o-.5*a)+e*(1.5*n-2.5*o+1)+r*(-1.5*n+2*o+.5*a)+i*(.5*n-.5*o)},s.default.prototype.curveTangent=function(t,e,r,i,a){s.default._validateParameters("curveTangent",arguments);var n=a*a;return t*(-3*n/2+2*a-.5)+e*(9*n/2-5*a)+r*(-9*n/2+4*a+.5)+i*(3*n/2-a)};var a=s.default;r.default=a},{"../error_helpers":11,"../main":15}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,s=(i=t("../main"))&&i.__esModule?i:{default:i},l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../constants"));var a=null,h=[],u=[],o=!1,n=!1,d=!1,f=!1,c=!0;s.default.prototype.beginContour=function(){return u=[],f=!0,this},s.default.prototype.beginShape=function(t){var e;(s.default._validateParameters("beginShape",arguments),this._renderer.isP3D)?(e=this._renderer).beginShape.apply(e,arguments):(a=t===l.POINTS||t===l.LINES||t===l.TRIANGLES||t===l.TRIANGLE_FAN||t===l.TRIANGLE_STRIP||t===l.QUADS||t===l.QUAD_STRIP?t:null,h=[],u=[]);return this},s.default.prototype.bezierVertex=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;if(s.default._validateParameters("bezierVertex",e),this._renderer.isP3D)(i=this._renderer).bezierVertex.apply(i,e);else if(0===h.length)s.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{o=!0;for(var a=[],n=0;n<e.length;n++)a[n]=e[n];a.isVert=!1,f?u.push(a):h.push(a)}return this},s.default.prototype.curveVertex=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;(s.default._validateParameters("curveVertex",e),this._renderer.isP3D)?(i=this._renderer).curveVertex.apply(i,e):(n=!0,this.vertex(e[0],e[1]));return this},s.default.prototype.endContour=function(){var t=u[0].slice();t.isVert=u[0].isVert,t.moveTo=!1,u.push(t),c&&(h.push(h[0]),c=!1);for(var e=0;e<u.length;e++)h.push(u[e]);return this},s.default.prototype.endShape=function(t){if(s.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(t,n,o,d,f,a);else{if(0===h.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var e=t===l.CLOSE;e&&!f&&h.push(h[0]),this._renderer.endShape(t,h,n,o,d,f,a),c=!(f=d=o=n=!1),e&&h.pop()}return this},s.default.prototype.quadraticVertex=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(s.default._validateParameters("quadraticVertex",e),this._renderer.isP3D){var i;(i=this._renderer).quadraticVertex.apply(i,e)}else{if(this._contourInited){var a={};return a.x=e[0],a.y=e[1],a.x3=e[2],a.y3=e[3],a.type=l.QUADRATIC,this._contourVertices.push(a),this}if(0<h.length){d=!0;for(var n=[],o=0;o<e.length;o++)n[o]=e[o];n.isVert=!1,f?u.push(n):h.push(n)}else s.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},s.default.prototype.vertex=function(t,e,r,i,a){if(this._renderer.isP3D){var n;(n=this._renderer).vertex.apply(n,arguments)}else{var o=[];o.isVert=!0,o[0]=t,o[1]=e,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),r&&(o.moveTo=r),f?(0===u.length&&(o.moveTo=!0),u.push(o)):h.push(o)}return this};var p=s.default;r.default=p},{"../constants":9,"../main":15}],26:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var s=Object.keys,t=Object.defineProperty,l="function"==typeof Symbol&&"symbol"===i(Symbol()),r=Object.prototype.propertyIsEnumerable,h=function(e){return function(t){return r.call(e,t)}};t(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("target must be an object");var r,i,a,n,o=Object(t);for(r=1;r<arguments.length;++r)for(i=Object(arguments[r]),n=s(i),l&&Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(i).filter(h(i))),a=0;a<n.length;++a)o[n[a]]=i[n[a]];return o},configurable:!0,enumerable:!1,writable:!0})}}()},{}],27:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("./main"))&&i.__esModule?i:{default:i};a.default.prototype.noLoop=function(){this._loop=!1},a.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},a.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},a.default.prototype.pop=function(){var t=this._styles.pop();t?(this._renderer.pop(t.renderer),Object.assign(this,t.props)):console.warn("pop() was called without matching push()")},a.default.prototype.redraw=function(t){if(!this._inUserDraw&&this._setupDone){var e=parseInt(t);(isNaN(e)||e<1)&&(e=1);var r=this._isGlobal?window:this,i=r.setup,a=r.draw;if("function"==typeof a){void 0===i&&r.scale(r._pixelDensity,r._pixelDensity);for(var n=function(t){t.call(r)},o=0;o<e;o++){r.resetMatrix(),r._renderer.isP3D&&r._renderer._update(),r._setProperty("frameCount",r.frameCount+1),r._registeredMethods.pre.forEach(n),this._inUserDraw=!0;try{a()}finally{this._inUserDraw=!1}r._registeredMethods.post.forEach(n)}}}};var n=a.default;r.default=n},{"./main":15}],28:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,n=(i=t("./main"))&&i.__esModule?i:{default:i};n.default.prototype.applyMatrix=function(t,e,r,i,a,n){var o;return(o=this._renderer).applyMatrix.apply(o,arguments),this},n.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.default.prototype.rotate=function(t,e){return n.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(t),e),this},n.default.prototype.rotateX=function(t){return this._assert3d("rotateX"),n.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(t)),this},n.default.prototype.rotateY=function(t){return this._assert3d("rotateY"),n.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(t)),this},n.default.prototype.rotateZ=function(t){return this._assert3d("rotateZ"),n.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(t)),this},n.default.prototype.scale=function(t,e,r){if(n.default._validateParameters("scale",arguments),t instanceof n.default.Vector){var i=t;t=i.x,e=i.y,r=i.z}else if(t instanceof Array){var a=t;t=a[0],e=a[1],r=a[2]||1}return isNaN(e)?e=r=t:isNaN(r)&&(r=1),this._renderer.scale.call(this._renderer,t,e,r),this},n.default.prototype.shearX=function(t){n.default._validateParameters("shearX",arguments);var e=this._toRadians(t);return this._renderer.applyMatrix(1,0,Math.tan(e),1,0,0),this},n.default.prototype.shearY=function(t){n.default._validateParameters("shearY",arguments);var e=this._toRadians(t);return this._renderer.applyMatrix(1,Math.tan(e),0,1,0,0),this},n.default.prototype.translate=function(t,e,r){return n.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(t,e,r):this._renderer.translate(t,e),this};var a=n.default;r.default=a},{"./main":15}],29:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var L,T,R,A,D={};function i(t,e){for(var r,i,a,n,o,s,l,h,u,d,f=D._toPixels(t),c=t.width,p=t.height,m=c*p,_=new Int32Array(m),g=0;g<m;g++)_[g]=D._getARGB(f,g);var v,y,b,x,w=new Int32Array(m),S=new Int32Array(m),C=new Int32Array(m),M=new Int32Array(m),P=0;for(function(t){var e=3.5*t|0;if(L!==(e=e<1?1:e<248?e:248)){T=1+(L=e)<<1,R=new Int32Array(T),A=new Array(T);for(var r=0;r<T;r++)A[r]=new Int32Array(256);for(var i,a,n,o,s=1,l=e-1;s<e;s++){R[e+s]=R[l]=a=l*l,n=A[e+s],o=A[l--];for(var h=0;h<256;h++)n[h]=o[h]=a*h}i=R[e]=e*e,n=A[e];for(var u=0;u<256;u++)n[u]=i*u}}(e),y=0;y<p;y++){for(v=0;v<c;v++){if(n=a=i=o=r=0,(s=v-L)<0)d=-s,s=0;else{if(c<=s)break;d=0}for(b=d;b<T&&!(c<=s);b++){var E=_[s+P];o+=(x=A[b])[(-16777216&E)>>>24],i+=x[(16711680&E)>>16],a+=x[(65280&E)>>8],n+=x[255&E],r+=R[b],s++}w[l=P+v]=o/r,S[l]=i/r,C[l]=a/r,M[l]=n/r}P+=c}for(u=(h=-L)*c,y=P=0;y<p;y++){for(v=0;v<c;v++){if(n=a=i=o=r=0,h<0)d=l=-h,s=v;else{if(p<=h)break;d=0,l=h,s=v+u}for(b=d;b<T&&!(p<=l);b++)o+=(x=A[b])[w[s]],i+=x[S[s]],a+=x[C[s]],n+=x[M[s]],r+=R[b],l++,s+=c;_[v+P]=o/r<<24|i/r<<16|a/r<<8|n/r}P+=c,u+=c,h++}D._setPixels(f,_)}D._toPixels=function(t){return t instanceof ImageData?t.data:t.getContext("2d").getImageData(0,0,t.width,t.height).data},D._getARGB=function(t,e){var r=4*e;return t[r+3]<<24&4278190080|t[r]<<16&16711680|t[r+1]<<8&65280|255&t[r+2]},D._setPixels=function(t,e){for(var r=0,i=0,a=t.length;i<a;i++)t[(r=4*i)+0]=(16711680&e[i])>>>16,t[r+1]=(65280&e[i])>>>8,t[r+2]=255&e[i],t[r+3]=(4278190080&e[i])>>>24},D._toImageData=function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},D._createImageData=function(t,e){return D._tmpCanvas=document.createElement("canvas"),D._tmpCtx=D._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,e)},D.apply=function(t,e,r){var i=t.getContext("2d"),a=i.getImageData(0,0,t.width,t.height),n=e(a,r);n instanceof ImageData?i.putImageData(n,0,0,0,0,t.width,t.height):i.putImageData(a,0,0,0,0,t.width,t.height)},D.threshold=function(t,e){var r=D._toPixels(t);void 0===e&&(e=.5);for(var i=Math.floor(255*e),a=0;a<r.length;a+=4){var n=void 0;n=i<=.2126*r[a]+.7152*r[a+1]+.0722*r[a+2]?255:0,r[a]=r[a+1]=r[a+2]=n}},D.gray=function(t){for(var e=D._toPixels(t),r=0;r<e.length;r+=4){var i=.2126*e[r]+.7152*e[r+1]+.0722*e[r+2];e[r]=e[r+1]=e[r+2]=i}},D.opaque=function(t){for(var e=D._toPixels(t),r=0;r<e.length;r+=4)e[r+3]=255;return e},D.invert=function(t){for(var e=D._toPixels(t),r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]},D.posterize=function(t,e){var r=D._toPixels(t);if(e<2||255<e)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var i=e-1,a=0;a<r.length;a+=4){var n=r[a],o=r[a+1],s=r[a+2];r[a]=255*(n*e>>8)/i,r[a+1]=255*(o*e>>8)/i,r[a+2]=255*(s*e>>8)/i}},D.dilate=function(t){for(var e,r,i,a,n,o,s,l,h,u,d,f,c,p,m,_,g,v=D._toPixels(t),y=0,b=v.length?v.length/4:0,x=new Int32Array(b);y<b;)for(r=(e=y)+t.width;y<r;)i=a=D._getARGB(v,y),(s=y-1)<e&&(s=y),r<=(o=y+1)&&(o=y),(l=y-t.width)<0&&(l=0),b<=(h=y+t.width)&&(h=y),f=D._getARGB(v,l),d=D._getARGB(v,s),c=D._getARGB(v,h),(n=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<(m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))&&(a=d,n=m),n<(p=77*((u=D._getARGB(v,o))>>16&255)+151*(u>>8&255)+28*(255&u))&&(a=u,n=p),n<(_=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(a=f,n=_),n<(g=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))&&(a=c,n=g),x[y++]=a;D._setPixels(v,x)},D.erode=function(t){for(var e,r,i,a,n,o,s,l,h,u,d,f,c,p,m,_,g,v=D._toPixels(t),y=0,b=v.length?v.length/4:0,x=new Int32Array(b);y<b;)for(r=(e=y)+t.width;y<r;)i=a=D._getARGB(v,y),(s=y-1)<e&&(s=y),r<=(o=y+1)&&(o=y),(l=y-t.width)<0&&(l=0),b<=(h=y+t.width)&&(h=y),f=D._getARGB(v,l),d=D._getARGB(v,s),c=D._getARGB(v,h),(m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(n=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(a=d,n=m),(p=77*((u=D._getARGB(v,o))>>16&255)+151*(u>>8&255)+28*(255&u))<n&&(a=u,n=p),(_=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<n&&(a=f,n=_),(g=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))<n&&(a=c,n=g),x[y++]=a;D._setPixels(v,x)},D.blur=function(t,e){i(t,e)};var a=D;r.default=a},{}],30:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=i(t("../core/main")),b=i(t("omggif"));function i(t){return t&&t.__esModule?t:{default:t}}var d=[];y.default.prototype.createImage=function(t,e){return y.default._validateParameters("createImage",arguments),new y.default.Image(t,e)},y.default.prototype.saveCanvas=function(){y.default._validateParameters("saveCanvas",arguments);var t,e,r,i,a=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(t=arguments[0],a.shift()):arguments[0]instanceof y.default.Element?(t=arguments[0].elt,a.shift()):t=this._curElement&&this._curElement.elt,1<=a.length&&(e=a[0]),2<=a.length&&(r=a[1]),r=r||y.default.prototype._checkFileExtension(e,r)[1]||"png"){default:i="image/png";break;case"jpeg":case"jpg":i="image/jpeg"}t.toBlob(function(t){y.default.prototype.downloadFile(t,e,r)},i)},y.default.prototype.saveGif=function(t,e){var r=t.gifProperties,i=r.loopLimit;1===i?i=null:null===i&&(i=0);for(var a=r.delay/10,n={loop:i,delay:a},o=new Uint8Array(t.width*t.height*r.numFrames*a),s=new b.default.GifWriter(o,t.width,t.height,n),l=[],h=0;h<r.numFrames;h++){for(var u=new Uint8Array(t.width*t.height),d=r.frames[h].data,f=d.length,c=0,p=0;c<f;c+=4,p++){var m=d[c+0]<<16|d[c+1]<<8|d[c+2]<<0,_=l.indexOf(m);-1===_?(u[p]=l.length,l.push(m)):u[p]=_}for(var g=1;g<l.length;)g<<=1;l.length=g,n.palette=new Uint32Array(l),s.addFrame(0,0,t.width,t.height,u,n)}s.end();var v=new Blob([o],{type:"image/gif"});y.default.prototype.downloadFile(v,e,"gif")},y.default.prototype.saveFrames=function(t,e,r,i,a){y.default._validateParameters("saveFrames",arguments);var n=r||3;n=y.default.prototype.constrain(n,0,15),n*=1e3;var o=i||15;o=y.default.prototype.constrain(o,0,22);var s=0,l=y.default.prototype._makeFrame,h=this._curElement.elt,u=setInterval(function(){l(t+s,e,h),s++},1e3/o);setTimeout(function(){if(clearInterval(u),a)a(d);else for(var t=d,e=0;e<t.length;e++){var r=t[e];y.default.prototype.downloadFile(r.imageData,r.filename,r.ext)}d=[]},n+.01)},y.default.prototype._makeFrame=function(t,e,r){var i,a;if(i=this?this._curElement.elt:r,e)switch(e.toLowerCase()){case"png":a="image/png";break;case"jpeg":case"jpg":a="image/jpeg";break;default:a="image/png"}else e="png",a="image/png";var n=i.toDataURL(a);n=n.replace(a,"image/octet-stream");var o={};o.imageData=n,o.filename=t,o.ext=e,d.push(o)};var a=y.default;r.default=a},{"../core/main":15,omggif:2}],31:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var x=a(t("../core/main")),d=a(t("./filters")),w=a(t("../core/helpers")),i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants")),m=a(t("omggif"));function a(t){return t&&t.__esModule?t:{default:t}}function S(t,e){return 0<t&&t<e?t:e}t("../core/error_helpers"),x.default.prototype.loadImage=function(r,i,a){x.default._validateParameters("loadImage",arguments);var n=new x.default.Image(1,1,this),o=this,t=new Request(r,{method:"GET",mode:"cors"});return fetch(r,t).then(function(t){if(t.headers.get("content-type").includes("image/gif"))t.arrayBuffer().then(function(t){t&&function(t,r,e,i,a){var n=new m.default.GifReader(t);r.width=r.canvas.width=n.width,r.height=r.canvas.height=n.height;var o=[],s=n.numFrames(),l=new Uint8ClampedArray(r.width*r.height*4),h=0;if(1<s){for(var u=function(t,e){try{e.decodeAndBlitFrameRGBA(t,l)}catch(t){x.default._friendlyFileLoadError(8,r.src),"function"==typeof i?i(t):console.error(t)}},d=0;d<s;d++){var f=n.frameInfo(d);h+=f.delay,1===n.frameInfo(d).disposal&&0<d?r.drawingContext.putImageData(o[d-1],0,0):(r.drawingContext.clearRect(0,0,r.width,r.height),l=new Uint8ClampedArray(r.width*r.height*4)),u(d,n);var c=new ImageData(l,r.width,r.height);r.drawingContext.putImageData(c,0,0),o.push(r.drawingContext.getImageData(0,0,r.width,r.height))}var p=n.loopCount();null===p?p=1:0===p&&(p=null),h/=s,r.gifProperties={displayIndex:0,delay:10*h,loopLimit:p,loopCount:0,frames:o,numFrames:s,playing:!0,timeDisplayed:0}}"function"==typeof e&&e(r);a()}(new Uint8Array(t),n,i,a,function(t){o._decrementPreload()}.bind(o))},function(t){"function"==typeof a?a(t):console.error(t)});else{var e=new Image;e.onload=function(){n.width=n.canvas.width=e.width,n.height=n.canvas.height=e.height,n.drawingContext.drawImage(e,0,0),n.modified=!0,"function"==typeof i&&i(n),o._decrementPreload()},e.onerror=function(t){x.default._friendlyFileLoadError(0,e.src),"function"==typeof a?a(t):console.error(t)},0!==r.indexOf("data:image/")&&(e.crossOrigin="Anonymous"),e.src=r}n.modified=!0}),n},x.default.prototype.image=function(t,e,r,i,a,n,o,s,l){x.default._validateParameters("image",arguments);var h=t.width,u=t.height;t.elt&&t.elt.videoWidth&&!t.canvas&&(h=t.elt.videoWidth,u=t.elt.videoHeight);var d=e,f=r,c=i||h,p=a||u,m=n||0,_=o||0,g=s||h,v=l||u;g=S(g,h),v=S(v,u);var y=1;t.elt&&!t.canvas&&t.elt.style.width&&(y=t.elt.videoWidth&&!i?t.elt.videoWidth:t.elt.width,y/=parseInt(t.elt.style.width,10)),m*=y,_*=y,v*=y,g*=y;var b=w.default.modeAdjust(d,f,c,p,this._renderer._imageMode);this._renderer.image(t,m,_,g,v,b.x,b.y,b.w,b.h)},x.default.prototype.tint=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];x.default._validateParameters("tint",e);var i=this.color.apply(this,e);this._renderer._tint=i.levels},x.default.prototype.noTint=function(){this._renderer._tint=null},x.default.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=d.default._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var i=r.getContext("2d"),a=i.createImageData(t.canvas.width,t.canvas.height),n=a.data,o=0;o<e.length;o+=4){var s=e[o],l=e[o+1],h=e[o+2],u=e[o+3];n[o]=s*this._renderer._tint[0]/255,n[o+1]=l*this._renderer._tint[1]/255,n[o+2]=h*this._renderer._tint[2]/255,n[o+3]=u*this._renderer._tint[3]/255}return i.putImageData(a,0,0),r},x.default.prototype.imageMode=function(t){x.default._validateParameters("imageMode",arguments),t!==i.CORNER&&t!==i.CORNERS&&t!==i.CENTER||(this._renderer._imageMode=t)};var n=x.default;r.default=n},{"../core/constants":9,"../core/error_helpers":11,"../core/helpers":12,"../core/main":15,"./filters":29,omggif:2}],32:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(t("../core/main")),i=n(t("./filters"));function n(t){return t&&t.__esModule?t:{default:t}}a.default.Image=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this._pixelsDirty=!0,this.gifProperties=null,this._modified=!1,this.pixels=[]},a.default.Image.prototype._animateGif=function(t){var e=this.gifProperties;if(e.playing&&(e.timeDisplayed+=t.deltaTime),e.timeDisplayed>=e.delay){var r=Math.floor(e.timeDisplayed/e.delay);if(e.timeDisplayed=0,e.displayIndex+=r,e.loopCount=Math.floor(e.displayIndex/e.numFrames),null!==e.loopLimit&&e.loopCount>=e.loopLimit)e.playing=!1;else{var i=e.displayIndex%e.numFrames;this.drawingContext.putImageData(e.frames[i],0,0),e.displayIndex=i,this._pixelsDirty=!0,this.setModified(!0)}}},a.default.Image.prototype._setProperty=function(t,e){this[t]=e,this.setModified(!0)},a.default.Image.prototype.loadPixels=function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},a.default.Image.prototype.updatePixels=function(t,e,r,i){a.default.Renderer2D.prototype.updatePixels.call(this,t,e,r,i),this.setModified(!0)},a.default.Image.prototype.get=function(t,e,r,i){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.Image.prototype._getPixel=a.default.Renderer2D.prototype._getPixel,a.default.Image.prototype.set=function(t,e,r){a.default.Renderer2D.prototype.set.call(this,t,e,r),this.setModified(!0)},a.default.Image.prototype.resize=function(t,e){0===t&&0===e?(t=this.canvas.width,e=this.canvas.height):0===t?t=this.canvas.width*e/this.canvas.height:0===e&&(e=this.canvas.height*t/this.canvas.width),t=Math.floor(t),e=Math.floor(e);var r=document.createElement("canvas");if(r.width=t,r.height=e,this.gifProperties)for(var i=this.gifProperties,a=function(t,e){for(var r=0,i=0;i<e.height;i++)for(var a=0;a<e.width;a++){var n=Math.floor(a*t.width/e.width),o=4*(Math.floor(i*t.height/e.height)*t.width+n);e.data[r++]=t.data[o++],e.data[r++]=t.data[o++],e.data[r++]=t.data[o++],e.data[r++]=t.data[o++]}},n=0;n<i.numFrames;n++){var o=this.drawingContext.createImageData(t,e);a(i.frames[n],o),i.frames[n]=o}r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=t,this.canvas.height=this.height=e,this.drawingContext.drawImage(r,0,0,t,e,0,0,t,e),0<this.pixels.length&&this.loadPixels(),this.setModified(!0),this._pixelsDirty=!0},a.default.Image.prototype.copy=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];a.default.prototype.copy.apply(this,e)},a.default.Image.prototype.mask=function(t){void 0===t&&(t=this);var e=this.drawingContext.globalCompositeOperation,r=1;t instanceof a.default.Renderer&&(r=t._pInst._pixelDensity);var i=[t,0,0,r*t.width,r*t.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",a.default.Image.prototype.copy.apply(this,i),this.drawingContext.globalCompositeOperation=e,this.setModified(!0)},a.default.Image.prototype.filter=function(t,e){i.default.apply(this.canvas,i.default[t],e),this.setModified(!0)},a.default.Image.prototype.blend=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];a.default.prototype.blend.apply(this,e),this.setModified(!0)},a.default.Image.prototype.setModified=function(t){this._modified=t},a.default.Image.prototype.isModified=function(){return this._modified},a.default.Image.prototype.save=function(t,e){this.gifProperties?a.default.prototype.saveGif(this,t):a.default.prototype.saveCanvas(this.canvas,t,e)},a.default.Image.prototype.reset=function(){if(this.gifProperties){var t=this.gifProperties;t.playing=!0,t.timeSinceStart=0,t.timeDisplayed=0,t.loopCount=0,t.displayIndex=0,this.drawingContext.putImageData(t.frames[0],0,0)}},a.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var t=this.gifProperties;return t.displayIndex%t.numFrames}},a.default.Image.prototype.setFrame=function(t){if(this.gifProperties){var e=this.gifProperties;t<e.numFrames&&0<=t?(e.timeDisplayed=0,e.displayIndex=t,this.drawingContext.putImageData(e.frames[t],0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},a.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},a.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},a.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},a.default.Image.prototype.delay=function(t){this.gifProperties&&(this.gifProperties.delay=t)};var o=a.default.Image;r.default=o},{"../core/main":15,"./filters":29}],33:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=a(t("../core/main")),i=a(t("./filters"));function a(t){return t&&t.__esModule?t:{default:t}}t("../color/p5.Color"),c.default.prototype.pixels=[],c.default.prototype.blend=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;(c.default._validateParameters("blend",e),this._renderer)?(i=this._renderer).blend.apply(i,e):c.default.Renderer2D.prototype.blend.apply(this,e)},c.default.prototype.copy=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,a,n,o,s,l,h,u,d;if(c.default._validateParameters("copy",e),9===e.length)i=e[0],a=e[1],n=e[2],o=e[3],s=e[4],l=e[5],h=e[6],u=e[7],d=e[8];else{if(8!==e.length)throw new Error("Signature not supported");i=this,a=e[0],n=e[1],o=e[2],s=e[3],l=e[4],h=e[5],u=e[6],d=e[7]}c.default.prototype._copyHelper(this,i,a,n,o,s,l,h,u,d),this._pixelsDirty=!0},c.default.prototype._copyHelper=function(t,e,r,i,a,n,o,s,l,h){e.loadPixels();var u=e.canvas.width/e.width,d=0,f=0;e._renderer&&e._renderer.isP3D&&(d=e.width/2,f=e.height/2),t._renderer&&t._renderer.isP3D?c.default.RendererGL.prototype.image.call(t._renderer,e,r+d,i+f,a,n,o,s,l,h):t.drawingContext.drawImage(e.canvas,u*(r+d),u*(i+f),u*a,u*n,o,s,l,h)},c.default.prototype.filter=function(t,e){c.default._validateParameters("filter",arguments),void 0!==this.canvas?i.default.apply(this.canvas,i.default[t],e):i.default.apply(this.elt,i.default[t],e)},c.default.prototype.get=function(t,e,r,i){var a;return c.default._validateParameters("get",arguments),(a=this._renderer).get.apply(a,arguments)},c.default.prototype.loadPixels=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];c.default._validateParameters("loadPixels",e),this._renderer.loadPixels()},c.default.prototype.set=function(t,e,r){this._renderer.set(t,e,r)},c.default.prototype.updatePixels=function(t,e,r,i){c.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(t,e,r,i)};var n=c.default;r.default=n},{"../color/p5.Color":7,"../core/main":15,"./filters":29}],34:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,s=(i=t("../core/main"))&&i.__esModule?i:{default:i};function a(t,e,r){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var i=arguments.length,a=[],n=0,o=0;o<i;o++){var s=arguments[o];if((s=+s)===1/0||s===-1/0)return 1/0;n<(s=Math.abs(s))&&(n=s),a[o]=s}0===n&&(n=1);for(var l=0,h=0,u=0;u<i;u++){var d=a[u]/n,f=d*d-h,c=l+f;h=c-l-f,l=c}return Math.sqrt(l)*n}s.default.prototype.abs=Math.abs,s.default.prototype.ceil=Math.ceil,s.default.prototype.constrain=function(t,e,r){return s.default._validateParameters("constrain",arguments),Math.max(Math.min(t,r),e)},s.default.prototype.dist=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return s.default._validateParameters("dist",e),4===e.length?a(e[2]-e[0],e[3]-e[1]):6===e.length?a(e[3]-e[0],e[4]-e[1],e[5]-e[2]):void 0},s.default.prototype.exp=Math.exp,s.default.prototype.floor=Math.floor,s.default.prototype.lerp=function(t,e,r){return s.default._validateParameters("lerp",arguments),r*(e-t)+t},s.default.prototype.log=Math.log,s.default.prototype.mag=function(t,e){return s.default._validateParameters("mag",arguments),a(t,e)},s.default.prototype.map=function(t,e,r,i,a,n){s.default._validateParameters("map",arguments);var o=(t-e)/(r-e)*(a-i)+i;return n?i<a?this.constrain(o,i,a):this.constrain(o,a,i):o},s.default.prototype.max=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return s.default._validateParameters("max",e),e[0]instanceof Array?Math.max.apply(null,e[0]):Math.max.apply(null,e)},s.default.prototype.min=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return s.default._validateParameters("min",e),e[0]instanceof Array?Math.min.apply(null,e[0]):Math.min.apply(null,e)},s.default.prototype.norm=function(t,e,r){return s.default._validateParameters("norm",arguments),this.map(t,e,r,0,1)},s.default.prototype.pow=Math.pow,s.default.prototype.round=Math.round,s.default.prototype.sq=function(t){return t*t},s.default.prototype.sqrt=Math.sqrt;var n=s.default;r.default=n},{"../core/main":15}],35:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i};a.default.prototype.createVector=function(t,e,r){return this instanceof a.default?new a.default.Vector(this,arguments):new a.default.Vector(t,e,r)};var n=a.default;r.default=n},{"../core/main":15}],36:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i};var y,b=4095,x=4,w=.5,S=function(t){return.5*(1-Math.cos(t*Math.PI))};a.default.prototype.noise=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==y){y=new Array(4096);for(var i=0;i<4096;i++)y[i]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),r<0&&(r=-r);for(var a,n,o,s,l,h=Math.floor(t),u=Math.floor(e),d=Math.floor(r),f=t-h,c=e-u,p=r-d,m=0,_=.5,g=0;g<x;g++){var v=h+(u<<4)+(d<<8);a=S(f),n=S(c),o=y[v&b],o+=a*(y[v+1&b]-o),s=y[v+16&b],o+=n*((s+=a*(y[v+16+1&b]-s))-o),s=y[(v+=256)&b],s+=a*(y[v+1&b]-s),l=y[v+16&b],s+=n*((l+=a*(y[v+16+1&b]-l))-s),m+=(o+=S(p)*(s-o))*_,_*=w,h<<=1,u<<=1,d<<=1,1<=(f*=2)&&(h++,f--),1<=(c*=2)&&(u++,c--),1<=(p*=2)&&(d++,p--)}return m},a.default.prototype.noiseDetail=function(t,e){0<t&&(x=t),0<e&&(w=e)},a.default.prototype.noiseSeed=function(t){var e,r,i,a=(i=4294967296,{setSeed:function(t){r=e=(null==t?Math.random()*i:t)>>>0},getSeed:function(){return e},rand:function(){return(r=(1664525*r+1013904223)%i)/i}});a.setSeed(t),y=new Array(4096);for(var n=0;n<4096;n++)y[n]=a.rand()};var n=a.default;r.default=n},{"../core/main":15}],37:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,s=(i=t("../core/main"))&&i.__esModule?i:{default:i},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants"));s.default.Vector=function(){var t,e,r;r=arguments[0]instanceof s.default?(this.p5=arguments[0],t=arguments[1][0]||0,e=arguments[1][1]||0,arguments[1][2]||0):(t=arguments[0]||0,e=arguments[1]||0,arguments[2]||0),this.x=t,this.y=e,this.z=r},s.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},s.default.Vector.prototype.set=function(t,e,r){return t instanceof s.default.Vector?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):t instanceof Array?(this.x=t[0]||0,this.y=t[1]||0,this.z=t[2]||0):(this.x=t||0,this.y=e||0,this.z=r||0),this},s.default.Vector.prototype.copy=function(){return this.p5?new s.default.Vector(this.p5,[this.x,this.y,this.z]):new s.default.Vector(this.x,this.y,this.z)},s.default.Vector.prototype.add=function(t,e,r){return t instanceof s.default.Vector?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0):t instanceof Array?(this.x+=t[0]||0,this.y+=t[1]||0,this.z+=t[2]||0):(this.x+=t||0,this.y+=e||0,this.z+=r||0),this},s.default.Vector.prototype.sub=function(t,e,r){return t instanceof s.default.Vector?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0):t instanceof Array?(this.x-=t[0]||0,this.y-=t[1]||0,this.z-=t[2]||0):(this.x-=t||0,this.y-=e||0,this.z-=r||0),this},s.default.Vector.prototype.mult=function(t){return"number"==typeof t&&isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):console.warn("p5.Vector.prototype.mult:","n is undefined or not a finite number"),this},s.default.Vector.prototype.div=function(t){return"number"==typeof t&&isFinite(t)?0===t?console.warn("p5.Vector.prototype.div:","divide by 0"):(this.x/=t,this.y/=t,this.z/=t):console.warn("p5.Vector.prototype.div:","n is undefined or not a finite number"),this},s.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},s.default.Vector.prototype.magSq=function(){var t=this.x,e=this.y,r=this.z;return t*t+e*e+r*r},s.default.Vector.prototype.dot=function(t,e,r){return t instanceof s.default.Vector?this.dot(t.x,t.y,t.z):this.x*(t||0)+this.y*(e||0)+this.z*(r||0)},s.default.Vector.prototype.cross=function(t){var e=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return this.p5?new s.default.Vector(this.p5,[e,r,i]):new s.default.Vector(e,r,i)},s.default.Vector.prototype.dist=function(t){return t.copy().sub(this).mag()},s.default.Vector.prototype.normalize=function(){var t=this.mag();return 0!==t&&this.mult(1/t),this},s.default.Vector.prototype.limit=function(t){var e=this.magSq();return t*t<e&&this.div(Math.sqrt(e)).mult(t),this},s.default.Vector.prototype.setMag=function(t){return this.normalize().mult(t)},s.default.Vector.prototype.heading=function(){var t=Math.atan2(this.y,this.x);return this.p5?this.p5._fromRadians(t):t},s.default.Vector.prototype.rotate=function(t){var e=this.heading()+t;this.p5&&(e=this.p5._toRadians(e));var r=this.mag();return this.x=Math.cos(e)*r,this.y=Math.sin(e)*r,this},s.default.Vector.prototype.angleBetween=function(t){var e=this.dot(t)/(this.mag()*t.mag()),r=Math.acos(Math.min(1,Math.max(-1,e)));return this.p5?this.p5._fromRadians(r):r},s.default.Vector.prototype.lerp=function(t,e,r,i){return t instanceof s.default.Vector?this.lerp(t.x,t.y,t.z,e):(this.x+=(t-this.x)*i||0,this.y+=(e-this.y)*i||0,this.z+=(r-this.z)*i||0,this)},s.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},s.default.Vector.prototype.equals=function(t,e,r){var i,a,n;return n=t instanceof s.default.Vector?(i=t.x||0,a=t.y||0,t.z||0):t instanceof Array?(i=t[0]||0,a=t[1]||0,t[2]||0):(i=t||0,a=e||0,r||0),this.x===i&&this.y===a&&this.z===n},s.default.Vector.fromAngle=function(t,e){return void 0===e&&(e=1),new s.default.Vector(e*Math.cos(t),e*Math.sin(t),0)},s.default.Vector.fromAngles=function(t,e,r){void 0===r&&(r=1);var i=Math.cos(e),a=Math.sin(e),n=Math.cos(t),o=Math.sin(t);return new s.default.Vector(r*o*a,-r*n,r*o*i)},s.default.Vector.random2D=function(){return this.fromAngle(Math.random()*n.TWO_PI)},s.default.Vector.random3D=function(){var t=Math.random()*n.TWO_PI,e=2*Math.random()-1,r=Math.sqrt(1-e*e),i=r*Math.cos(t),a=r*Math.sin(t);return new s.default.Vector(i,a,e)},s.default.Vector.add=function(t,e,r){return r?r.set(t):r=t.copy(),r.add(e),r},s.default.Vector.sub=function(t,e,r){return r?r.set(t):r=t.copy(),r.sub(e),r},s.default.Vector.mult=function(t,e,r){return r?r.set(t):r=t.copy(),r.mult(e),r},s.default.Vector.div=function(t,e,r){return r?r.set(t):r=t.copy(),r.div(e),r},s.default.Vector.dot=function(t,e){return t.dot(e)},s.default.Vector.cross=function(t,e){return t.cross(e)},s.default.Vector.dist=function(t,e){return t.dist(e)},s.default.Vector.lerp=function(t,e,r,i){return i?i.set(t):i=t.copy(),i.lerp(e,r),i},s.default.Vector.mag=function(t){var e=t.x,r=t.y,i=t.z,a=e*e+r*r+i*i;return Math.sqrt(a)};var a=s.default.Vector;r.default=a},{"../core/constants":9,"../core/main":15}],38:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i};var n="_lcg_random_state",o=4294967296,s=0;a.default.prototype._lcg=function(t){return this[t]=(1664525*this[t]+1013904223)%o,this[t]/o},a.default.prototype._lcgSetSeed=function(t,e){this[t]=(null==e?Math.random()*o:e)>>>0},a.default.prototype.randomSeed=function(t){this._lcgSetSeed(n,t),this._gaussian_previous=!1},a.default.prototype.random=function(t,e){var r;if(a.default._validateParameters("random",arguments),r=null!=this[n]?this._lcg(n):Math.random(),void 0===t)return r;if(void 0===e)return t instanceof Array?t[Math.floor(r*t.length)]:r*t;if(e<t){var i=t;t=e,e=i}return r*(e-t)+t},a.default.prototype.randomGaussian=function(t,e){var r,i,a,n;if(this._gaussian_previous)r=s,this._gaussian_previous=!1;else{for(;1<=(n=(i=this.random(2)-1)*i+(a=this.random(2)-1)*a););r=i*(n=Math.sqrt(-2*Math.log(n)/n)),s=a*n,this._gaussian_previous=!0}return r*(e||1)+(t||0)};var l=a.default;r.default=l},{"../core/main":15}],39:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants"));a.default.prototype._angleMode=n.RADIANS,a.default.prototype.acos=function(t){return this._fromRadians(Math.acos(t))},a.default.prototype.asin=function(t){return this._fromRadians(Math.asin(t))},a.default.prototype.atan=function(t){return this._fromRadians(Math.atan(t))},a.default.prototype.atan2=function(t,e){return this._fromRadians(Math.atan2(t,e))},a.default.prototype.cos=function(t){return Math.cos(this._toRadians(t))},a.default.prototype.sin=function(t){return Math.sin(this._toRadians(t))},a.default.prototype.tan=function(t){return Math.tan(this._toRadians(t))},a.default.prototype.degrees=function(t){return t*n.RAD_TO_DEG},a.default.prototype.radians=function(t){return t*n.DEG_TO_RAD},a.default.prototype.angleMode=function(t){t!==n.DEGREES&&t!==n.RADIANS||(this._angleMode=t)},a.default.prototype._toRadians=function(t){return this._angleMode===n.DEGREES?t*n.DEG_TO_RAD:t},a.default.prototype._toDegrees=function(t){return this._angleMode===n.RADIANS?t*n.RAD_TO_DEG:t},a.default.prototype._fromRadians=function(t){return this._angleMode===n.DEGREES?t*n.RAD_TO_DEG:t};var o=a.default;r.default=o},{"../core/constants":9,"../core/main":15}],40:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,m=(i=t("../core/main"))&&i.__esModule?i:{default:i};m.default.prototype.camera=function(){var t;this._assert3d("camera");for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return m.default._validateParameters("camera",r),(t=this._renderer._curCamera).camera.apply(t,r),this},m.default.prototype.perspective=function(){var t;this._assert3d("perspective");for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return m.default._validateParameters("perspective",r),(t=this._renderer._curCamera).perspective.apply(t,r),this},m.default.prototype.ortho=function(){var t;this._assert3d("ortho");for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return m.default._validateParameters("ortho",r),(t=this._renderer._curCamera).ortho.apply(t,r),this},m.default.prototype.frustum=function(){var t;this._assert3d("frustum");for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return m.default._validateParameters("frustum",r),(t=this._renderer._curCamera).frustum.apply(t,r),this},m.default.prototype.createCamera=function(){this._assert3d("createCamera");var t=new m.default.Camera(this._renderer);return t._computeCameraDefaultSettings(),t._setDefaultCamera(),this._renderer._curCamera=t},m.default.Camera=function(t){this._renderer=t,this.cameraType="default",this.cameraMatrix=new m.default.Matrix,this.projMatrix=new m.default.Matrix},m.default.Camera.prototype.perspective=function(t,e,r,i){this.cameraType=0<arguments.length?"custom":"default",this.cameraFOV=void 0===t?t=this.defaultCameraFOV:this._renderer._pInst._toRadians(t),void 0===e&&(e=this.defaultAspectRatio),void 0===r&&(r=this.defaultCameraNear),void 0===i&&(i=this.defaultCameraFar),r<=1e-4&&(r=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),i<r&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=e,this.cameraNear=r,this.cameraFar=i,this.projMatrix=m.default.Matrix.identity();var a=1/Math.tan(this.cameraFOV/2),n=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(a/e,0,0,0,0,-a,0,0,0,0,(i+r)*n,-1,0,0,2*i*r*n,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},m.default.Camera.prototype.ortho=function(t,e,r,i,a,n){void 0===t&&(t=-this._renderer.width/2),void 0===e&&(e=+this._renderer.width/2),void 0===r&&(r=-this._renderer.height/2),void 0===i&&(i=+this._renderer.height/2),void 0===a&&(a=0),void 0===n&&(n=Math.max(this._renderer.width,this._renderer.height));var o=e-t,s=i-r,l=n-a,h=2/o,u=2/s,d=-2/l,f=-(e+t)/o,c=-(i+r)/s,p=-(n+a)/l;this.projMatrix=m.default.Matrix.identity(),this.projMatrix.set(h,0,0,0,0,-u,0,0,0,0,d,0,f,c,p,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},m.default.Camera.prototype.frustum=function(t,e,r,i,a,n){void 0===t&&(t=-this._renderer.width/2),void 0===e&&(e=+this._renderer.width/2),void 0===r&&(r=-this._renderer.height/2),void 0===i&&(i=+this._renderer.height/2),void 0===a&&(a=0),void 0===n&&(n=Math.max(this._renderer.width,this._renderer.height));var o=e-t,s=i-r,l=n-a,h=2*a/o,u=2*a/s,d=-2*n*a/l,f=(e+t)/o,c=(i+r)/s,p=-(n+a)/l;this.projMatrix=m.default.Matrix.identity(),this.projMatrix.set(h,0,0,0,0,u,0,0,f,c,p,-1,0,0,d,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},m.default.Camera.prototype._rotateView=function(t,e,r,i){var a=this.centerX,n=this.centerY,o=this.centerZ;a-=this.eyeX,n-=this.eyeY,o-=this.eyeZ;var s=m.default.Matrix.identity(this._renderer._pInst);s.rotate(this._renderer._pInst._toRadians(t),e,r,i);var l=[a*s.mat4[0]+n*s.mat4[4]+o*s.mat4[8],a*s.mat4[1]+n*s.mat4[5]+o*s.mat4[9],a*s.mat4[2]+n*s.mat4[6]+o*s.mat4[10]];l[0]+=this.eyeX,l[1]+=this.eyeY,l[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,l[0],l[1],l[2],this.upX,this.upY,this.upZ)},m.default.Camera.prototype.pan=function(t){var e=this._getLocalAxes();this._rotateView(t,e.y[0],e.y[1],e.y[2])},m.default.Camera.prototype.tilt=function(t){var e=this._getLocalAxes();this._rotateView(t,e.x[0],e.x[1],e.x[2])},m.default.Camera.prototype.lookAt=function(t,e,r){this.camera(this.eyeX,this.eyeY,this.eyeZ,t,e,r,this.upX,this.upY,this.upZ)},m.default.Camera.prototype.camera=function(t,e,r,i,a,n,o,s,l){void 0===t&&(t=this.defaultEyeX,e=this.defaultEyeY,r=this.defaultEyeZ,i=t,a=e,s=1,l=o=n=0),this.eyeX=t,this.eyeY=e,this.eyeZ=r,this.centerX=i,this.centerY=a,this.centerZ=n,this.upX=o,this.upY=s,this.upZ=l;var h=this._getLocalAxes();this.cameraMatrix.set(h.x[0],h.y[0],h.z[0],0,h.x[1],h.y[1],h.z[1],0,h.x[2],h.y[2],h.z[2],0,0,0,0,1);var u=-t,d=-e,f=-r;return this.cameraMatrix.translate([u,d,f]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},m.default.Camera.prototype.move=function(t,e,r){var i=this._getLocalAxes(),a=[i.x[0]*t,i.x[1]*t,i.x[2]*t],n=[i.y[0]*e,i.y[1]*e,i.y[2]*e],o=[i.z[0]*r,i.z[1]*r,i.z[2]*r];this.camera(this.eyeX+a[0]+n[0]+o[0],this.eyeY+a[1]+n[1]+o[1],this.eyeZ+a[2]+n[2]+o[2],this.centerX+a[0]+n[0]+o[0],this.centerY+a[1]+n[1]+o[1],this.centerZ+a[2]+n[2]+o[2],0,1,0)},m.default.Camera.prototype.setPosition=function(t,e,r){var i=t-this.eyeX,a=e-this.eyeY,n=r-this.eyeZ;this.camera(t,e,r,this.centerX+i,this.centerY+a,this.centerZ+n,0,1,0)},m.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},m.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},m.default.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},m.default.Camera.prototype.copy=function(){var t=new m.default.Camera(this._renderer);return t.cameraFOV=this.cameraFOV,t.aspectRatio=this.aspectRatio,t.eyeX=this.eyeX,t.eyeY=this.eyeY,t.eyeZ=this.eyeZ,t.centerX=this.centerX,t.centerY=this.centerY,t.centerZ=this.centerZ,t.cameraNear=this.cameraNear,t.cameraFar=this.cameraFar,t.cameraType=this.cameraType,t.cameraMatrix=this.cameraMatrix.copy(),t.projMatrix=this.projMatrix.copy(),t},m.default.Camera.prototype._getLocalAxes=function(){var t=this.eyeX-this.centerX,e=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,i=Math.sqrt(t*t+e*e+r*r);0!==i&&(t/=i,e/=i,r/=i);var a=this.upX,n=this.upY,o=this.upZ,s=n*r-o*e,l=-a*r+o*t,h=a*e-n*t;a=e*h-r*l,n=-t*h+r*s,o=t*l-e*s;var u=Math.sqrt(s*s+l*l+h*h);0!==u&&(s/=u,l/=u,h/=u);var d=Math.sqrt(a*a+n*n+o*o);return 0!==d&&(a/=d,n/=d,o/=d),{x:[s,l,h],y:[a,n,o],z:[t,e,r]}},m.default.Camera.prototype._orbit=function(t,e,r){var i=this.eyeX-this.centerX,a=this.eyeY-this.centerY,n=this.eyeZ-this.centerZ,o=Math.sqrt(i*i+a*a+n*n),s=Math.atan2(i,n),l=Math.acos(Math.max(-1,Math.min(1,a/o)));s+=t,(o+=r)<0&&(o=.1),(l+=e)>Math.PI?l=Math.PI:l<=0&&(l=.001);var h=Math.sin(l)*o*Math.sin(s),u=Math.cos(l)*o,d=Math.sin(l)*o*Math.cos(s);this.camera(h+this.centerX,u+this.centerY,d+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},m.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},m.default.prototype.setCamera=function(t){this._renderer._curCamera=t,this._renderer.uPMatrix.set(t.projMatrix.mat4[0],t.projMatrix.mat4[1],t.projMatrix.mat4[2],t.projMatrix.mat4[3],t.projMatrix.mat4[4],t.projMatrix.mat4[5],t.projMatrix.mat4[6],t.projMatrix.mat4[7],t.projMatrix.mat4[8],t.projMatrix.mat4[9],t.projMatrix.mat4[10],t.projMatrix.mat4[11],t.projMatrix.mat4[12],t.projMatrix.mat4[13],t.projMatrix.mat4[14],t.projMatrix.mat4[15])};var a=m.default.Camera;r.default=a},{"../core/main":15}],41:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,R=(i=t("../core/main"))&&i.__esModule?i:{default:i};var a=Array,A=function(t){return t instanceof Array};"undefined"!=typeof Float32Array&&(a=Float32Array,A=function(t){return t instanceof Array||t instanceof Float32Array}),R.default.Matrix=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return t.length&&t[t.length-1]instanceof R.default&&(this.p5=t[t.length-1]),"mat3"===t[0]?this.mat3=Array.isArray(t[1])?t[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(t[0])?t[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},R.default.Matrix.prototype.set=function(t){return t instanceof R.default.Matrix?this.mat4=t.mat4:A(t)?this.mat4=t:16===arguments.length&&(this.mat4[0]=t,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},R.default.Matrix.prototype.get=function(){return new R.default.Matrix(this.mat4,this.p5)},R.default.Matrix.prototype.copy=function(){var t=new R.default.Matrix(this.p5);return t.mat4[0]=this.mat4[0],t.mat4[1]=this.mat4[1],t.mat4[2]=this.mat4[2],t.mat4[3]=this.mat4[3],t.mat4[4]=this.mat4[4],t.mat4[5]=this.mat4[5],t.mat4[6]=this.mat4[6],t.mat4[7]=this.mat4[7],t.mat4[8]=this.mat4[8],t.mat4[9]=this.mat4[9],t.mat4[10]=this.mat4[10],t.mat4[11]=this.mat4[11],t.mat4[12]=this.mat4[12],t.mat4[13]=this.mat4[13],t.mat4[14]=this.mat4[14],t.mat4[15]=this.mat4[15],t},R.default.Matrix.identity=function(t){return new R.default.Matrix(t)},R.default.Matrix.prototype.transpose=function(t){var e,r,i,a,n,o;return t instanceof R.default.Matrix?(e=t.mat4[1],r=t.mat4[2],i=t.mat4[3],a=t.mat4[6],n=t.mat4[7],o=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=e,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=r,this.mat4[9]=a,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=i,this.mat4[13]=n,this.mat4[14]=o,this.mat4[15]=t.mat4[15]):A(t)&&(e=t[1],r=t[2],i=t[3],a=t[6],n=t[7],o=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=e,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=r,this.mat4[9]=a,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=i,this.mat4[13]=n,this.mat4[14]=o,this.mat4[15]=t[15]),this},R.default.Matrix.prototype.invert=function(t){var e,r,i,a,n,o,s,l,h,u,d,f,c,p,m,_;t instanceof R.default.Matrix?(e=t.mat4[0],r=t.mat4[1],i=t.mat4[2],a=t.mat4[3],n=t.mat4[4],o=t.mat4[5],s=t.mat4[6],l=t.mat4[7],h=t.mat4[8],u=t.mat4[9],d=t.mat4[10],f=t.mat4[11],c=t.mat4[12],p=t.mat4[13],m=t.mat4[14],_=t.mat4[15]):A(t)&&(e=t[0],r=t[1],i=t[2],a=t[3],n=t[4],o=t[5],s=t[6],l=t[7],h=t[8],u=t[9],d=t[10],f=t[11],c=t[12],p=t[13],m=t[14],_=t[15]);var g=e*o-r*n,v=e*s-i*n,y=e*l-a*n,b=r*s-i*o,x=r*l-a*o,w=i*l-a*s,S=h*p-u*c,C=h*m-d*c,M=h*_-f*c,P=u*m-d*p,E=u*_-f*p,L=d*_-f*m,T=g*L-v*E+y*P+b*M-x*C+w*S;return T?(T=1/T,this.mat4[0]=(o*L-s*E+l*P)*T,this.mat4[1]=(i*E-r*L-a*P)*T,this.mat4[2]=(p*w-m*x+_*b)*T,this.mat4[3]=(d*x-u*w-f*b)*T,this.mat4[4]=(s*M-n*L-l*C)*T,this.mat4[5]=(e*L-i*M+a*C)*T,this.mat4[6]=(m*y-c*w-_*v)*T,this.mat4[7]=(h*w-d*y+f*v)*T,this.mat4[8]=(n*E-o*M+l*S)*T,this.mat4[9]=(r*M-e*E-a*S)*T,this.mat4[10]=(c*x-p*y+_*g)*T,this.mat4[11]=(u*y-h*x-f*g)*T,this.mat4[12]=(o*C-n*P-s*S)*T,this.mat4[13]=(e*P-r*C+i*S)*T,this.mat4[14]=(p*v-c*b-m*g)*T,this.mat4[15]=(h*b-u*v+d*g)*T,this):null},R.default.Matrix.prototype.invert3x3=function(){var t=this.mat3[0],e=this.mat3[1],r=this.mat3[2],i=this.mat3[3],a=this.mat3[4],n=this.mat3[5],o=this.mat3[6],s=this.mat3[7],l=this.mat3[8],h=l*a-n*s,u=-l*i+n*o,d=s*i-a*o,f=t*h+e*u+r*d;return f?(f=1/f,this.mat3[0]=h*f,this.mat3[1]=(-l*e+r*s)*f,this.mat3[2]=(n*e-r*a)*f,this.mat3[3]=u*f,this.mat3[4]=(l*t-r*o)*f,this.mat3[5]=(-n*t+r*i)*f,this.mat3[6]=d*f,this.mat3[7]=(-s*t+e*o)*f,this.mat3[8]=(a*t-e*i)*f,this):null},R.default.Matrix.prototype.transpose3x3=function(t){var e=t[1],r=t[2],i=t[5];return this.mat3[1]=t[3],this.mat3[2]=t[6],this.mat3[3]=e,this.mat3[5]=t[7],this.mat3[6]=r,this.mat3[7]=i,this},R.default.Matrix.prototype.inverseTranspose=function(t){void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=t.mat4[0],this.mat3[1]=t.mat4[1],this.mat3[2]=t.mat4[2],this.mat3[3]=t.mat4[4],this.mat3[4]=t.mat4[5],this.mat3[5]=t.mat4[6],this.mat3[6]=t.mat4[8],this.mat3[7]=t.mat4[9],this.mat3[8]=t.mat4[10]);var e=this.invert3x3();if(e)e.transpose3x3(this.mat3);else for(var r=0;r<9;r++)this.mat3[r]=0;return this},R.default.Matrix.prototype.determinant=function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],e=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],i=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],a=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],n=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],o=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],h=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],u=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return t*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-e*u+r*h+i*l-a*s+n*o},R.default.Matrix.prototype.mult=function(t){var e;if(t===this||t===this.mat4)e=this.copy().mat4;else if(t instanceof R.default.Matrix)e=t.mat4;else if(A(t))e=t;else{if(16!==arguments.length)return;e=arguments}var r=this.mat4[0],i=this.mat4[1],a=this.mat4[2],n=this.mat4[3];return this.mat4[0]=r*e[0]+i*e[4]+a*e[8]+n*e[12],this.mat4[1]=r*e[1]+i*e[5]+a*e[9]+n*e[13],this.mat4[2]=r*e[2]+i*e[6]+a*e[10]+n*e[14],this.mat4[3]=r*e[3]+i*e[7]+a*e[11]+n*e[15],r=this.mat4[4],i=this.mat4[5],a=this.mat4[6],n=this.mat4[7],this.mat4[4]=r*e[0]+i*e[4]+a*e[8]+n*e[12],this.mat4[5]=r*e[1]+i*e[5]+a*e[9]+n*e[13],this.mat4[6]=r*e[2]+i*e[6]+a*e[10]+n*e[14],this.mat4[7]=r*e[3]+i*e[7]+a*e[11]+n*e[15],r=this.mat4[8],i=this.mat4[9],a=this.mat4[10],n=this.mat4[11],this.mat4[8]=r*e[0]+i*e[4]+a*e[8]+n*e[12],this.mat4[9]=r*e[1]+i*e[5]+a*e[9]+n*e[13],this.mat4[10]=r*e[2]+i*e[6]+a*e[10]+n*e[14],this.mat4[11]=r*e[3]+i*e[7]+a*e[11]+n*e[15],r=this.mat4[12],i=this.mat4[13],a=this.mat4[14],n=this.mat4[15],this.mat4[12]=r*e[0]+i*e[4]+a*e[8]+n*e[12],this.mat4[13]=r*e[1]+i*e[5]+a*e[9]+n*e[13],this.mat4[14]=r*e[2]+i*e[6]+a*e[10]+n*e[14],this.mat4[15]=r*e[3]+i*e[7]+a*e[11]+n*e[15],this},R.default.Matrix.prototype.apply=function(t){var e;if(t===this||t===this.mat4)e=this.copy().mat4;else if(t instanceof R.default.Matrix)e=t.mat4;else if(A(t))e=t;else{if(16!==arguments.length)return;e=arguments}var r=this.mat4,i=r[0],a=r[4],n=r[8],o=r[12];r[0]=e[0]*i+e[1]*a+e[2]*n+e[3]*o,r[4]=e[4]*i+e[5]*a+e[6]*n+e[7]*o,r[8]=e[8]*i+e[9]*a+e[10]*n+e[11]*o,r[12]=e[12]*i+e[13]*a+e[14]*n+e[15]*o;var s=r[1],l=r[5],h=r[9],u=r[13];r[1]=e[0]*s+e[1]*l+e[2]*h+e[3]*u,r[5]=e[4]*s+e[5]*l+e[6]*h+e[7]*u,r[9]=e[8]*s+e[9]*l+e[10]*h+e[11]*u,r[13]=e[12]*s+e[13]*l+e[14]*h+e[15]*u;var d=r[2],f=r[6],c=r[10],p=r[14];r[2]=e[0]*d+e[1]*f+e[2]*c+e[3]*p,r[6]=e[4]*d+e[5]*f+e[6]*c+e[7]*p,r[10]=e[8]*d+e[9]*f+e[10]*c+e[11]*p,r[14]=e[12]*d+e[13]*f+e[14]*c+e[15]*p;var m=r[3],_=r[7],g=r[11],v=r[15];return r[3]=e[0]*m+e[1]*_+e[2]*g+e[3]*v,r[7]=e[4]*m+e[5]*_+e[6]*g+e[7]*v,r[11]=e[8]*m+e[9]*_+e[10]*g+e[11]*v,r[15]=e[12]*m+e[13]*_+e[14]*g+e[15]*v,this},R.default.Matrix.prototype.scale=function(t,e,r){return t instanceof R.default.Vector?(e=t.y,r=t.z,t=t.x):t instanceof Array&&(e=t[1],r=t[2],t=t[0]),this.mat4[0]*=t,this.mat4[1]*=t,this.mat4[2]*=t,this.mat4[3]*=t,this.mat4[4]*=e,this.mat4[5]*=e,this.mat4[6]*=e,this.mat4[7]*=e,this.mat4[8]*=r,this.mat4[9]*=r,this.mat4[10]*=r,this.mat4[11]*=r,this},R.default.Matrix.prototype.rotate=function(t,e,r,i){e instanceof R.default.Vector?(r=e.y,i=e.z,e=e.x):e instanceof Array&&(r=e[1],i=e[2],e=e[0]);var a=Math.sqrt(e*e+r*r+i*i);e*=1/a,r*=1/a,i*=1/a;var n=this.mat4[0],o=this.mat4[1],s=this.mat4[2],l=this.mat4[3],h=this.mat4[4],u=this.mat4[5],d=this.mat4[6],f=this.mat4[7],c=this.mat4[8],p=this.mat4[9],m=this.mat4[10],_=this.mat4[11],g=Math.sin(t),v=Math.cos(t),y=1-v,b=e*e*y+v,x=r*e*y+i*g,w=i*e*y-r*g,S=e*r*y-i*g,C=r*r*y+v,M=i*r*y+e*g,P=e*i*y+r*g,E=r*i*y-e*g,L=i*i*y+v;return this.mat4[0]=n*b+h*x+c*w,this.mat4[1]=o*b+u*x+p*w,this.mat4[2]=s*b+d*x+m*w,this.mat4[3]=l*b+f*x+_*w,this.mat4[4]=n*S+h*C+c*M,this.mat4[5]=o*S+u*C+p*M,this.mat4[6]=s*S+d*C+m*M,this.mat4[7]=l*S+f*C+_*M,this.mat4[8]=n*P+h*E+c*L,this.mat4[9]=o*P+u*E+p*L,this.mat4[10]=s*P+d*E+m*L,this.mat4[11]=l*P+f*E+_*L,this},R.default.Matrix.prototype.translate=function(t){var e=t[0],r=t[1],i=t[2]||0;this.mat4[12]+=this.mat4[0]*e+this.mat4[4]*r+this.mat4[8]*i,this.mat4[13]+=this.mat4[1]*e+this.mat4[5]*r+this.mat4[9]*i,this.mat4[14]+=this.mat4[2]*e+this.mat4[6]*r+this.mat4[10]*i,this.mat4[15]+=this.mat4[3]*e+this.mat4[7]*r+this.mat4[11]*i},R.default.Matrix.prototype.rotateX=function(t){this.rotate(t,1,0,0)},R.default.Matrix.prototype.rotateY=function(t){this.rotate(t,0,1,0)},R.default.Matrix.prototype.rotateZ=function(t){this.rotate(t,0,0,1)},R.default.Matrix.prototype.perspective=function(t,e,r,i){var a=1/Math.tan(t/2),n=1/(r-i);return this.mat4[0]=a/e,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(i+r)*n,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*i*r*n,this.mat4[15]=0,this},R.default.Matrix.prototype.ortho=function(t,e,r,i,a,n){var o=1/(t-e),s=1/(r-i),l=1/(a-n);return this.mat4[0]=-2*o,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(t+e)*o,this.mat4[13]=(i+r)*s,this.mat4[14]=(n+a)*l,this.mat4[15]=1,this};var n=R.default.Matrix;r.default=n},{"../core/main":15}],42:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=a(t("../core/main")),n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}}(t("../core/constants")),i=a(t("libtess"));t("./p5.Shader"),t("./p5.Camera"),t("../core/p5.Renderer"),t("./p5.Matrix");t("path");function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s="precision mediump float;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[8];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalDiffuseColors[8];\nuniform vec3 uDirectionalSpecularColors[8];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightDiffuseColors[8];\t\nuniform vec3 uPointLightSpecularColors[8];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[8];\nuniform float uSpotLightConc[8];\nuniform vec3 uSpotLightDiffuseColors[8];\nuniform vec3 uSpotLightSpecularColors[8];\nuniform vec3 uSpotLightLocation[8];\nuniform vec3 uSpotLightDirection[8];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 8; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n",l={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:s+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n}\n",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;\n  }\n}",phongVert:"precision mediump float;\nprecision mediump int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform vec3 uAmbientColor[8];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n}\n",phongFrag:s+"// include lighting.glsl\nprecision highp float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;\n  }\n}",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = uMaterialColor;\n  gl_FragColor.a *= saturate(max(antialias, cover));\n}",lineVert:"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\n\nattribute vec4 aPosition;\nattribute vec4 aDirection;\n  \nvoid main() {\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  vec3 scale = vec3(0.9995);\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posq.xyz = posq.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 q = uProjectionMatrix * posq;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);\n\n  // flip tangent to normal (it's already normalized)\n  vec2 normal = vec2(-tangent.y, tangent.x);\n\n  float thickness = aDirection.w * uStrokeWeight;\n  vec2 offset = normal * thickness / 2.0;\n\n  vec2 curPerspScale;\n\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n}\n",lineFrag:"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\n\nvoid main() {\n  gl_FragColor = uMaterialColor;\n}",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n\tfloat mask = 0.0;\n\n\t// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n\tmask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n\t// if strokeWeight is 1 or less lets just draw a square\n\t// this prevents weird artifacting from carving circles when our points are really small\n\t// if strokeWeight is larger than 1, we just use it as is\n\n\tmask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n\t// throw away the borders of the mask\n    // otherwise we get weird alpha blending issues\n\n\tif(mask > 0.98){\n      discard;\n  \t}\n\n  \tgl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;\n}"};h.default.RendererGL=function(t,e,r,i){return h.default.Renderer.call(this,t,e,r),this._setAttributeDefaults(e),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=n.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=this._cachedBlendMode=n.BLEND,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new h.default.Matrix,this.uPMatrix=new h.default.Matrix,this.uNMatrix=new h.default.Matrix("mat3"),this._curCamera=new h.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this.gHash={},this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this._pointVertexBuffer=this.GL.createBuffer(),this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.isImmediateDrawing=!1,this.immediateMode={},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=n.IMAGE,this.textureWrapX=n.CLAMP,this.textureWrapY=n.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this},h.default.RendererGL.prototype=Object.create(h.default.Renderer.prototype),h.default.RendererGL.prototype._setAttributeDefaults=function(t){var e={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!1};null===t._glAttributes?t._glAttributes=e:t._glAttributes=Object.assign(e,t._glAttributes)},h.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),null===this.drawingContext)throw new Error("Error creating webgl context");var t=this.drawingContext;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(t){throw t}},h.default.RendererGL.prototype._resetContext=function(t,e){var r=this.width,i=this.height,a=this.canvas.id,n=this._pInst instanceof h.default.Graphics;if(n){var o=this._pInst;o.canvas.parentNode.removeChild(o.canvas),o.canvas=document.createElement("canvas"),(o._pInst._userNode||document.body).appendChild(o.canvas),h.default.Element.call(o,o.canvas,o._pInst),o.width=r,o.height=i}else{var s=this.canvas;s&&s.parentNode.removeChild(s),(s=document.createElement("canvas")).id=a,this._pInst._userNode?this._pInst._userNode.appendChild(s):document.body.appendChild(s),this._pInst.canvas=s}var l=new h.default.RendererGL(this._pInst.canvas,this._pInst,!n);this._pInst._setProperty("_renderer",l),l.resize(r,i),l._applyDefaults(),n||this._pInst._elements.push(l),"function"==typeof e&&setTimeout(function(){e.apply(window._renderer,t)},0)},h.default.prototype.setAttributes=function(t,e){if(void 0!==this._glAttributes){var r=!0;if(void 0!==e?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[t]!==e&&(this._glAttributes[t]=e,r=!1)):t instanceof Object&&this._glAttributes!==t&&(this._glAttributes=t,r=!1),this._renderer.isP3D&&!r){if(!this._setupDone)for(var i in this._renderer.gHash)if(this._renderer.gHash.hasOwnProperty(i))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},h.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},h.default.RendererGL.prototype.background=function(){var t,e=(t=this._pInst).color.apply(t,arguments),r=e.levels[0]/255,i=e.levels[1]/255,a=e.levels[2]/255,n=e.levels[3]/255;this.GL.clearColor(r,i,a,n),this.GL.depthMask(!0),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT),this._pixelsState._pixelsDirty=!0},h.default.RendererGL.prototype.fill=function(t,e,r,i){var a=h.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=a._array,this.drawMode=n.FILL,this._useNormalMaterial=!1,this._tex=null},h.default.RendererGL.prototype.stroke=function(t,e,r,i){i=255;var a=h.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=a._array},h.default.RendererGL.prototype.strokeCap=function(t){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},h.default.RendererGL.prototype.blendMode=function(t){t===n.DARKEST||t===n.LIGHTEST||t===n.ADD||t===n.BLEND||t===n.SUBTRACT||t===n.SCREEN||t===n.EXCLUSION||t===n.REPLACE||t===n.MULTIPLY||t===n.REMOVE?this.curBlendMode=t:t!==n.BURN&&t!==n.OVERLAY&&t!==n.HARD_LIGHT&&t!==n.SOFT_LIGHT&&t!==n.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},h.default.RendererGL.prototype.erase=function(t,e){this._isErasing||(this._cachedBlendMode=this.curBlendMode,this.blendMode(n.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,t/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,e/255],this._isErasing=!0)},h.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode),this._isErasing=!1)},h.default.RendererGL.prototype.strokeWeight=function(t){this.curStrokeWeight!==t&&(this.pointSize=t,this.curStrokeWeight=t)},h.default.RendererGL.prototype._getPixel=function(t,e){var r,i,a=this._pixelsState;return i=a._pixelsDirty?(r=new Uint8Array(4),this.drawingContext.readPixels(t,e,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,r),0):(r=a.pixels,4*(Math.floor(t)+Math.floor(e)*this.canvas.width)),[r[i+0],r[i+1],r[i+2],r[i+3]]},h.default.RendererGL.prototype.loadPixels=function(){var t=this._pixelsState;if(t._pixelsDirty)if(!(t._pixelsDirty=!1)===this._pInst._glAttributes.preserveDrawingBuffer){var e=t.pixels,r=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;e instanceof Uint8Array&&e.length===r||(e=new Uint8Array(r),this._pixelsState._setProperty("pixels",e));var i=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*i,this.height*i,this.GL.RGBA,this.GL.UNSIGNED_BYTE,e)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},h.default.RendererGL.prototype.geometryInHash=function(t){return void 0!==this.gHash[t]},h.default.RendererGL.prototype.resize=function(t,e){h.default.Renderer.prototype.resize.call(this,t,e),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var r=this._pixelsState;r._pixelsDirty=!0,void 0!==r.pixels&&r._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},h.default.RendererGL.prototype.clear=function(){var t=(arguments.length<=0?void 0:arguments[0])||0,e=(arguments.length<=1?void 0:arguments[1])||0,r=(arguments.length<=2?void 0:arguments[2])||0,i=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(t,e,r,i),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT),this._pixelsState._pixelsDirty=!0},h.default.RendererGL.prototype.applyMatrix=function(t,e,r,i,a,n){16===arguments.length?h.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([t,e,0,0,r,i,0,0,0,0,1,0,a,n,0,1])},h.default.RendererGL.prototype.translate=function(t,e,r){return t instanceof h.default.Vector&&(r=t.z,e=t.y,t=t.x),this.uMVMatrix.translate([t,e,r]),this},h.default.RendererGL.prototype.scale=function(t,e,r){return this.uMVMatrix.scale(t,e,r),this},h.default.RendererGL.prototype.rotate=function(t,e){return void 0===e?this.rotateZ(t):(h.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},h.default.RendererGL.prototype.rotateX=function(t){return this.rotate(t,1,0,0),this},h.default.RendererGL.prototype.rotateY=function(t){return this.rotate(t,0,1,0),this},h.default.RendererGL.prototype.rotateZ=function(t){return this.rotate(t,0,0,1),this},h.default.RendererGL.prototype.push=function(){var t=h.default.Renderer.prototype.push.apply(this),e=t.properties;return e.uMVMatrix=this.uMVMatrix.copy(),e.uPMatrix=this.uPMatrix.copy(),e._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),e.ambientLightColors=this.ambientLightColors.slice(),e.specularColors=this.specularColors.slice(),e.directionalLightDirections=this.directionalLightDirections.slice(),e.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),e.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),e.pointLightPositions=this.pointLightPositions.slice(),e.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),e.pointLightSpecularColors=this.pointLightSpecularColors.slice(),e.spotLightPositions=this.spotLightPositions.slice(),e.spotLightDirections=this.spotLightDirections.slice(),e.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),e.spotLightSpecularColors=this.spotLightSpecularColors.slice(),e.spotLightAngle=this.spotLightAngle.slice(),e.spotLightConc=this.spotLightConc.slice(),e.userFillShader=this.userFillShader,e.userStrokeShader=this.userStrokeShader,e.userPointShader=this.userPointShader,e.pointSize=this.pointSize,e.curStrokeWeight=this.curStrokeWeight,e.curStrokeColor=this.curStrokeColor,e.curFillColor=this.curFillColor,e._useSpecularMaterial=this._useSpecularMaterial,e._useEmissiveMaterial=this._useEmissiveMaterial,e._useShininess=this._useShininess,e.constantAttenuation=this.constantAttenuation,e.linearAttenuation=this.linearAttenuation,e.quadraticAttenuation=this.quadraticAttenuation,e._enableLighting=this._enableLighting,e._useNormalMaterial=this._useNormalMaterial,e._tex=this._tex,e.drawMode=this.drawMode,t},h.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=h.default.Matrix.identity(this._pInst),this},h.default.RendererGL.prototype._getImmediateStrokeShader=function(){var t=this.userStrokeShader;return t&&t.isStrokeShader()?t:this._getLineShader()},h.default.RendererGL.prototype._getRetainedStrokeShader=h.default.RendererGL.prototype._getImmediateStrokeShader,h.default.RendererGL.prototype._getImmediateFillShader=function(){if(this._useNormalMaterial)return console.log("Sorry, normalMaterial() does not currently work with custom WebGL geometry created with beginShape(). Falling back to standard fill material."),this._getImmediateModeShader();var t=this.userFillShader;if(this._enableLighting){if(!t||!t.isLightShader())return this._getLightShader()}else if(this._tex){if(!t||!t.isTextureShader())return this._getLightShader()}else if(!t)return this._getImmediateModeShader();return t},h.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var t=this.userFillShader;if(this._enableLighting){if(!t||!t.isLightShader())return this._getLightShader()}else if(this._tex){if(!t||!t.isTextureShader())return this._getLightShader()}else if(!t)return this._getColorShader();return t},h.default.RendererGL.prototype._getImmediatePointShader=function(){var t=this.userPointShader;return t&&t.isPointShader()?t:this._getPointShader()},h.default.RendererGL.prototype._getRetainedLineShader=h.default.RendererGL.prototype._getImmediateLineShader,h.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new h.default.Shader(this,l.phongVert,l.phongFrag):this._defaultLightShader=new h.default.Shader(this,l.lightVert,l.lightTextureFrag)),this._defaultLightShader},h.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new h.default.Shader(this,l.immediateVert,l.vertexColorFrag)),this._defaultImmediateModeShader},h.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new h.default.Shader(this,l.normalVert,l.normalFrag)),this._defaultNormalShader},h.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new h.default.Shader(this,l.normalVert,l.basicFrag)),this._defaultColorShader},h.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new h.default.Shader(this,l.pointVert,l.pointFrag)),this._defaultPointShader},h.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new h.default.Shader(this,l.lineVert,l.lineFrag)),this._defaultLineShader},h.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new h.default.Shader(this,l.fontVert,l.fontFrag)),this._defaultFontShader},h.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var t=new h.default.Image(1,1);t.set(0,0,255),this._emptyTexture=new h.default.Texture(this,t)}return this._emptyTexture},h.default.RendererGL.prototype.getTexture=function(t){var e=this.textures,r=!0,i=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var s=n.value;if(s.src===t)return s}}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var l=new h.default.Texture(this,t);return e.push(l),l},h.default.RendererGL.prototype._setStrokeUniforms=function(t){t.bindShader(),t.setUniform("uMaterialColor",this.curStrokeColor),t.setUniform("uStrokeWeight",this.curStrokeWeight)},h.default.RendererGL.prototype._setFillUniforms=function(t){t.bindShader(),t.setUniform("uMaterialColor",this.curFillColor),t.setUniform("isTexture",!!this._tex),this._tex&&t.setUniform("uSampler",this._tex),t.setUniform("uTint",this._tint),t.setUniform("uSpecular",this._useSpecularMaterial),t.setUniform("uEmissive",this._useEmissiveMaterial),t.setUniform("uShininess",this._useShininess),t.setUniform("uUseLighting",this._enableLighting);var e=this.pointLightDiffuseColors.length/3;t.setUniform("uPointLightCount",e),t.setUniform("uPointLightLocation",this.pointLightPositions),t.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),t.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var r=this.directionalLightDiffuseColors.length/3;t.setUniform("uDirectionalLightCount",r),t.setUniform("uLightingDirection",this.directionalLightDirections),t.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),t.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var i=this.ambientLightColors.length/3;t.setUniform("uAmbientLightCount",i),t.setUniform("uAmbientColor",this.ambientLightColors);var a=this.spotLightDiffuseColors.length/3;t.setUniform("uSpotLightCount",a),t.setUniform("uSpotLightAngle",this.spotLightAngle),t.setUniform("uSpotLightConc",this.spotLightConc),t.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),t.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),t.setUniform("uSpotLightLocation",this.spotLightPositions),t.setUniform("uSpotLightDirection",this.spotLightDirections),t.setUniform("uConstantAttenuation",this.constantAttenuation),t.setUniform("uLinearAttenuation",this.linearAttenuation),t.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),t.bindTextures()},h.default.RendererGL.prototype._setPointUniforms=function(t){t.bindShader(),t.setUniform("uMaterialColor",this.curStrokeColor),t.setUniform("uPointSize",this.pointSize)},h.default.RendererGL.prototype._bindBuffer=function(t,e,r,i,a){if(e||(e=this.GL.ARRAY_BUFFER),this.GL.bindBuffer(e,t),void 0!==r){var n=new(i||Float32Array)(r);this.GL.bufferData(e,n,a||this.GL.STATIC_DRAW)}},h.default.RendererGL.prototype._flatten=function(t){if(0===t.length)return[];if(2e4<t.length){var e,r=Object.prototype.toString,i=[],a=t.slice();for(e=a.pop();"[object Array]"===r.call(e)?a.push.apply(a,o(e)):i.push(e),a.length&&void 0!==(e=a.pop()););return i.reverse(),i}var n;return(n=[]).concat.apply(n,o(t))},h.default.RendererGL.prototype._vToNArray=function(t){var e=[],r=!0,i=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var s=n.value;e.push(s.x,s.y,s.z)}}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return e},h.default.prototype._assert3d=function(t){if(!this._renderer.isP3D)throw new Error("".concat(t,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},h.default.RendererGL.prototype._initTessy=function(){var t=new i.default.GluTesselator;return t.gluTessCallback(i.default.gluEnum.GLU_TESS_VERTEX_DATA,function(t,e){e[e.length]=t[0],e[e.length]=t[1],e[e.length]=t[2]}),t.gluTessCallback(i.default.gluEnum.GLU_TESS_BEGIN,function(t){t!==i.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(t))}),t.gluTessCallback(i.default.gluEnum.GLU_TESS_ERROR,function(t){console.log("error callback"),console.log("error number: ".concat(t))}),t.gluTessCallback(i.default.gluEnum.GLU_TESS_COMBINE,function(t,e,r){return[t[0],t[1],t[2]]}),t.gluTessCallback(i.default.gluEnum.GLU_TESS_EDGE_FLAG,function(t){}),t},h.default.RendererGL.prototype._triangulate=function(t){this._tessy.gluTessNormal(0,0,1);var e=[];this._tessy.gluTessBeginPolygon(e);for(var r=0;r<t.length;r++){this._tessy.gluTessBeginContour();for(var i=t[r],a=0;a<i.length;a+=3){var n=[i[a],i[a+1],i[a+2]];this._tessy.gluTessVertex(n,n)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),e},h.default.RendererGL.prototype._bezierCoefficients=function(t){var e=t*t,r=1-t,i=r*r;return[i*r,3*i*t,3*r*e,e*t]},h.default.RendererGL.prototype._quadraticCoefficients=function(t){var e=1-t;return[e*e,2*e*t,t*t]},h.default.RendererGL.prototype._bezierToCatmull=function(t){return[t[1],t[1]+(t[2]-t[0])/this._curveTightness,t[2]-(t[3]-t[1])/this._curveTightness,t[2]]};var u=h.default.RendererGL;r.default=u},{"../core/constants":9,"../core/main":15,"../core/p5.Renderer":18,"./p5.Camera":40,"./p5.Matrix":41,"./p5.Shader":43,libtess:1,path:3}],43:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i};a.default.Shader=function(t,e,r){this._renderer=t,this._vertSrc=e,this._fragSrc=r,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},a.default.Shader.prototype.init=function(){if(0===this._glProgram){var t=this._renderer.GL;if(this._vertShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertShader,this._vertSrc),t.compileShader(this._vertShader),!t.getShaderParameter(this._vertShader,t.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(t.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragShader,this._fragSrc),t.compileShader(this._fragShader),!t.getShaderParameter(this._fragShader,t.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(t.getShaderInfoLog(this._fragShader))),null;this._glProgram=t.createProgram(),t.attachShader(this._glProgram,this._vertShader),t.attachShader(this._glProgram,this._fragShader),t.linkProgram(this._glProgram),t.getProgramParameter(this._glProgram,t.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(t.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},a.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var t=this._renderer.GL,e=t.getProgramParameter(this._glProgram,t.ACTIVE_ATTRIBUTES),r=0;r<e;++r){var i=t.getActiveAttrib(this._glProgram,r),a=i.name,n=t.getAttribLocation(this._glProgram,a),o={};o.name=a,o.location=n,o.index=r,o.type=i.type,o.size=i.size,this.attributes[a]=o}this._loadedAttributes=!0}},a.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var t=this._renderer.GL,e=t.getProgramParameter(this._glProgram,t.ACTIVE_UNIFORMS),r=0,i=0;i<e;++i){var a=t.getActiveUniform(this._glProgram,i),n={};n.location=t.getUniformLocation(this._glProgram,a.name),n.size=a.size;var o=a.name;1<a.size&&(o=o.substring(0,o.indexOf("[0]"))),n.name=o,n.type=a.type,n.type===t.SAMPLER_2D&&(n.samplerIndex=r,r++,this.samplers.push(n)),this.uniforms[o]=n}this._loadedUniforms=!0}},a.default.Shader.prototype.compile=function(){},a.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},a.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},a.default.Shader.prototype.bindTextures=function(){var t=this._renderer.GL,e=!0,r=!1,i=void 0;try{for(var a,n=this.samplers[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var o=a.value,s=o.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),t.activeTexture(t.TEXTURE0+o.samplerIndex),s.bindTexture(),s.update(),t.uniform1i(o.location,o.samplerIndex)}}catch(t){r=!0,i=t}finally{try{e||null==n.return||n.return()}finally{if(r)throw i}}},a.default.Shader.prototype.updateTextures=function(){var t=!0,e=!1,r=void 0;try{for(var i,a=this.samplers[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var n=i.value.texture;n&&n.update()}}catch(t){e=!0,r=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw r}}},a.default.Shader.prototype.unbindTextures=function(){},a.default.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},a.default.Shader.prototype.useProgram=function(){return this._renderer.GL.useProgram(this._glProgram),this},a.default.Shader.prototype.setUniform=function(t,e){var r=this.uniforms[t];if(r){var i=r.location,a=this._renderer.GL;switch(this.useProgram(),r.type){case a.BOOL:!0===e?a.uniform1i(i,1):a.uniform1i(i,0);break;case a.INT:1<r.size?e.length&&a.uniform1iv(i,e):a.uniform1i(i,e);break;case a.FLOAT:1<r.size?e.length&&a.uniform1fv(i,e):a.uniform1f(i,e);break;case a.FLOAT_MAT3:a.uniformMatrix3fv(i,!1,e);break;case a.FLOAT_MAT4:a.uniformMatrix4fv(i,!1,e);break;case a.FLOAT_VEC2:1<r.size?e.length&&a.uniform2fv(i,e):a.uniform2f(i,e[0],e[1]);break;case a.FLOAT_VEC3:1<r.size?e.length&&a.uniform3fv(i,e):a.uniform3f(i,e[0],e[1],e[2]);break;case a.FLOAT_VEC4:1<r.size?e.length&&a.uniform4fv(i,e):a.uniform4f(i,e[0],e[1],e[2],e[3]);break;case a.INT_VEC2:1<r.size?e.length&&a.uniform2iv(i,e):a.uniform2i(i,e[0],e[1]);break;case a.INT_VEC3:1<r.size?e.length&&a.uniform3iv(i,e):a.uniform3i(i,e[0],e[1],e[2]);break;case a.INT_VEC4:1<r.size?e.length&&a.uniform4iv(i,e):a.uniform4i(i,e[0],e[1],e[2],e[3]);break;case a.SAMPLER_2D:a.activeTexture(a.TEXTURE0+r.samplerIndex),r.texture=this._renderer.getTexture(e),a.uniform1i(r.location,r.samplerIndex)}return this}},a.default.Shader.prototype.isLightShader=function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},a.default.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},a.default.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},a.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},a.default.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},a.default.Shader.prototype.enableAttrib=function(t,e,r,i,a,n){if(t){0;var o=t.location;if(-1!==o){var s=this._renderer.GL;s.enableVertexAttribArray(o),s.vertexAttribPointer(o,e,r||s.FLOAT,i||!1,a||0,n||0)}}return this};var n=a.default.Shader;r.default=n},{"../core/main":15}]},{},[15,9,10,11,12,14,20,16,17,18,19,21,26,27,28,22,23,24,25,5,6,7,8,29,30,31,32,33,34,35,36,37,38,39,13])(39)});